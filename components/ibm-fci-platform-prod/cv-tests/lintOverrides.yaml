##############################################################################################################
## Licensed Materials - Property of IBM
##
## IBM Financial Crimes Insight, PID 5900-A0H
## IBM Financial Crimes Insight for IBM Cloud Pak for Data, PID 5737-E41
##
## (c) Copyright IBM Corporation 2016, 2019
##
## U.S. Government Users Restricted Rights:  Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
##############################################################################################################

overrides:
  - reason: "This image is not used in CP4D"
    message: "image.*logsearch-curator.*is not used"
  - reason: "This image is not used in CP4D"
    message: "image.*elastalert.*is not used"
  - reason: "This image is not used in CP4D"
    message: "image.*logshipper.*is not used"
  - reason: "We need this hook to delete jobs pre upgrade"
    message: ".*charts/common-scripts/templates/pre-upgrade-job.yaml.*found helm hook.*"
  - reason: "runAsUser need not be set for OpenShift as OpenShift SCC takes care of it"
    message: ".*keys for pod security context not defined.*securityContext.runAsUser.*"
  - reason: "This service scales up depending on number of brokers specified"
    message: ".*charts/kafka/templates/nodeport-service.yaml: multiple yaml documents in one file is not allowed.*"
  - reason: "Service Selector matching a pod name only exists during run time and we dont have a selector matching the pod name"
    rule: ServiceSelectorMatchesPod
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*.Values.mongodb.configmap.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*configMaps.config_yml.*"  
  - reason: "This will not be used in CP4D"
    message: ".*potentially secret parameter.*global.smtp_auth.*"
  - reason: "Not a sensitive information"
    message: ".*potentially secret parameter.*kafka.configurationOverrides.ssl.client.auth.*"
  - reason: "This section includes configs related to our security auth. Not a sensitive information other than the below override"
    message: ".*potentially secret parameter.*security-auth.*"
  - reason: "This file is not used"
    message: ".*charts/platform-secrets/templates/pullsecret.yaml.*"
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*Values.*mqNodePort.*" 
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*Values.*fsGroupConfig.*"    
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*swidtag.*"     
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*LDAP_USER_FILTER_OVERRIDE.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*externalRegistry.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*service.nodePort.*"     
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*mongodb.replicas.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*mongodbDirectoryPerDB.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*mongodbUsername.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*webProxyServer.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*image.timestamp.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*deployOnEKS.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*vcName.*"  
  - reason: "Used only if it is defined"
    message: "parameter is used but not defined.*coreReleaseName.*"  
  - reason: "This cronjob will not be run in CP4D"
    message: "ibm-fci-platform-prod/charts/logging/templates/_helpers.tpl.*.Capabilites in template conditions is not recommended.*"
  - reason: "Used only if it is defined"
    message: ".*parameter is used but not defined.*global.imagePullSecrets.*"
    rule: UsedParametersAreDefined
  - reason: "Used only if it is defined"
    message: ".*parameter is used but not defined.*global.enforceHealthCheck.*"
    rule: UsedParametersAreDefined
  - reason: "Used only if it is defined"
    message: ".*parameter is used but not defined.*global.hostAliases.*"
    rule: UsedParametersAreDefined
  - reason: "We don't use nodeport services when deploying in CP4D"
    rule: NoNodePortServices
  - reason: "We don't use Pod Disruption Budget as of this release"
    rule: PodDisruptionBudgetInReadme
  - reason: "We don't intend to use sch chart this release"
    rule: ChartUsesSCH
  - reason: "As of date - We don't intend to use Entitled Registry this release, will update the image path if required"
    rule: UseEntitledRegistry
  - reason: "These are sample image tags that we are planning to use"
    rule: ContainerImageNameIsValid 
  - reason: "This resource is created only used when createPv and useDynamicProvisioning is set to false - not for cp4d"
    message: ".*pv.yaml.*useDynamicProvisioning.*"
  - reason: "This will be a big change affecting all our containers and charts. We don't intend to change this, this release"
    rule: ParameterIsCamelCase
  - reason: "Our charts will be a dry run - We will add Helm Tests in subsequent releases"
    rule: HelmTestExists
  - reason: "This service scales up depending on number of kafka brokers"
    message: "charts/kafka/templates/nodeport-service.yaml.*launch link.*may not be used more than once"
    rule: NoDuplicateLaunchLinkNames
  - reason: "The label errors were introduced by Linter 2.0 - We will take efforts to fix them in the next week"
    message: ".*app.kubernetes.io/managed-by.*"
  - reason: "The only requirement for this chart is added directly to charts directory"
    message: ".*requirements.yaml not found .*"
  - reason: "We will not be having applciation tests this release"
    message: "no application tests defined"
    rule: AppTestExists
  - reason: "Security capabilities drop all is added when deploying to CP4D"
    message: "charts/case-manager/templates/fci-solution-deployment.yaml.*securityContext.capabilities.drop.*"
  - reason: "Drop All is added when deploying to CP4D"
    message: "charts/mongodb/templates/statefulset.*securityContext.capabilities.drop.*"
  - reason: "Mq will be running in privileged mode - Exception"
    message: ".* charts/case-manager/templates/fci-messaging-deployment.yaml: .*"
  - reason: "We don't deploy Elastalert in CP4D environments"
    message: "charts/logging/templates/elastalert.*"
  - reason: "Kafka will be running as anyuid - Need Exception"
    message: "charts/kafka/templates/statefulset.yaml: .*"
  - reason: "Mq will be running in privileged mode -  Need Exception"
    message: "charts/case-manager/templates/fci-messaging-deployment.yaml: privileged containers are not allowed: .*"
  - reason: "DB2 will be running with privileged SCC - Need exception"
    message: ".*charts/db2/templates/sts.yaml: .*"
  - reason: "This resource is not deployed in our CP4D environments"
    message: ".*charts/prometheus.*"
  - reason: "This resource is not deployed in our CP4D environments"
    message: ".*charts/grafana.*"
  - reason: "This resource is not deployed in our CP4D environments"
    message: ".*charts/logging/templates/filebeat.*"
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/case-manager/templates/fci-solution-config.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/cedm/templates/configmap.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/rms/values.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/rms/templates/configmap.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/rms/values.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "Since our product is a suite of multiple applications, our product version and chart version will be the same."
    rule: AppAndChartVersionsDoNotMatch
  - reason: "They are internal service ports and not IAM Endpoints"
    message: "charts/search/templates/liberty-config.yaml: .*"
    rule: NoPrivateIAMEndpoints
  - reason: "This points to our internal Artifactory URL to pull our images in the CI/CD Pipeline"
    message: "ibm_cloud_pak/manifest.yaml: .*"
    rule: NoInternalURLs
  - reason: "Our Charts use security context and pod security policy is not applicable"
    message: "README.md: .*"
    rule: CustomPodSecurityInReadme
  - reason: "Our Charts use security context and pod security policy is not applicable"
    message: ".*PodSecurityPolicy Requirements.*"
    rule: ReadmeHasRequiredSections
  - reason: "Our Charts use security context and pod security policy is not applicable"
    message: "ibm_cloud_pak/qualification.yaml: .* "
    rule: PodSecurityInQualificationYAML
  - reason: "Same keys are present in values and values-metadata file. Not an error"
    message: ".*kafka.configurationOverrides.*"
    rule: ValuesMetadataKeyIsValid
  - reason: "Same keys are present in values and values-metadata file. Not an error"
    message: "ibm_cloud_pak/values-metadata.yaml: key structure does not match values.yaml: kafka.configurationOverrides.*"
    rule: ValuesMetadataStructureMatchesValues
  - message: ".*icon is recommended.*"
    reason: "We don't intend to use an icon in our chart yaml"
    rule: StandardHelmLint
  - message: ".*charts/rms/templates/voice-deploy.yaml: securityContext.privileged=true not allowed on container.*"
    reason: "We have to run rms streams container in priviliged mode"