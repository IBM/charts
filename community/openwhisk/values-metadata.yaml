
## Metadata for OpenWhisk configuration
## This metadata is used to augment the value.yaml to drive IPC UI for configuration of the Helm chart installation
     
## apiHostName configuration metadata
whisk:
  __metadata:
    label: "OpenWhisk configuration"
  ingress:
    name:
      __metadata:
        label: "Ingress name"
        type: "string"
        required: true
    apiHostName: 
      __metadata:
        label: "API host name"
        description: "Please specify the hostname / IP address of your cluster"
        type: "string"
        required: true
    apiHostPort: 
      __metadata:
        label: "API host port"
        type: "string"
        required: true
    apiHostProto: 
      __metadata:
        label: "API host protocol"
        type: "string"
        required: true
    type:
      __metadata:
        label: "Ingress type"
        type: "string"
        required: true
    annotations:
      __metadata:
        label: "Annotations"    
    domain:
      __metadata:
        label: "Domain"
        type: "string"
        required: true
    tls:
      __metadata:
        label: "TLS configuration"
      emabled: 
        __metadata:
          label: "TLS enabled"
          type: "boolean"
          required: true
      secretenabled:
        __metadata:
          label: "Secret enabled"
          type: "boolean"
          required: true
      createsecret:
        __metadata:
          label: "Create secret"
          type: "boolean"
          required: true
      secretname:
        __metadata:
          label: "TLS Secret name"
          type: "string"
          required: true
      secrettype:
        __metadata:
          label: "TLS Secret type"
          type: "string"
          required: true
      crt:
        __metadata:
          label: "TLS crt"
          type: "string"
          required: true
      key:
        __metadata:
          label: "TLS Key"
          type: "string"
          required: true
  auth:
    __metadata:
      label: "Auth configuration"
    system: 
      __metadata:
        label: "System"
        type: "string"
        required: true
    guest: 
      __metadata:
        label: "Guest"
        type: "string"
        required: true
  systemNameSpace: 
    __metadata:
      label: "System namespace"
      type: "string"
      required: true
  loadbalancer:
    __metadata:
      label: "Load balancer"
    blackboxFraction: 
      __metadata:
        label: "Blackbox fraction"
        type: "string"
        required: true
    timeoutFactor: 
      __metadata:
        label: "Timeout factor"
        type: "integer"
        required: true
  containerPool:
    __metadata:
      label: "Container pool"
    userMemory: 
      __metadata:
        label: "User memory"
        type: "integer"
        required: true
  runtimes: 
    __metadata:
      label: "Runtimes"
      type: "string"
      required: true
  versions:
    __metadata:
      label: "Version configuration"
    openwhisk:
      __metadata:
        label: "OpenWhisk"
      buildDate: 
        __metadata:
          label: "Build date"
          type: "string"
          required: true
      buildNo: 
        __metadata:
          label: "Build number"
          type: "string"
          required: true
      gitTag: 
        __metadata:
          label: "Git tag"
          type: "string"
          required: true
    openwhiskCli:
      __metadata:
        label: "OpenWhisk CLI"
      tag: 
        __metadata:
          label: "Tag"
          type: "string"
          required: true
    openwhiskCatalog:
      __metadata:
        label: "OpenWhisk catalog"    
      gitTag:
        __metadata:
          label: "Git tag"
          type: "string"
          required: true
    openwhiskPackageAlarms:
      __metadata:
        label: "package"
      gitTag:
        __metadata:
          label: "Git tag"
          type: "string"
          required: true
    openwhiskPackageCloudant:
      __metadata:
        label: "Cloudant package"
      gitTag:
        __metadata:
          label: "Git tag"
          type: "string"
          required: true
    openwhiskPackageKafka:
      __metadata:
        label: "Kafka package"
      gitTag:
        __metadata:
          label: "Git tag"
          type: "string"
          required: true
      
k8s:
  __metadata:
    label: "Kubernetes configuration"
  domain: 
    __metadata:
      label: "Domain"
      type: "string"
      required: true
  dns: 
    __metadata:
      label: "DNS"
      type: "string"
      required: true
  persistence:
    __metadata:
      label: "Persistence"
    enabled: true
      __metadata:
        label: "Persistence enabled"
        type: "boolean"
        required: true
    useDynamicProvisioning: true
      __metadata:
        label: "Use dynamic provisioning"
        type: "boolean"
        required: true
    defaultStorageClass:  
      __metadata:
        label: "Default storage class"
        type: "string"
        required: false
        
utility:
  __metadata:
    label: "Utility configuration"
  ansibleRunner:
    __metadata:
      label: "Ansible runner"
    imageName: 
      __metadata:
        label: "Image name"
        type: "string"
        required: true
    imageTag: 
      __metadata:
        label: "Image tag"
        type: "string"
        required: true
    imagePullPolicy: 
      __metadata:
        label: "Image pull policy"
        type: "string"
        required: true
  scriptRunner:
    __metadata:
    label: "Script runner"
    imageName: 
      __metadata:
        label: "Image name"
        type: "string"
        required: true
    imageTag: 
      __metadata:
        label: "Image tag"
        type: "string"
        required: true
    imagePullPolicy: 
      __metadata:
        label: "Image pull policy"
        type: "string"
        required: true

docker:
  __metadata: 
    label: "Docker configuration"
  registry:
    __metadata: 
      label: "Docker registry"
      name:
        __metadata:
          label: "Name"
          type: "string"
          required: true
      username:
        __metadata:
        label: "Username"
        type: "string"
        required: true
      password:
        __metadata:
        label: "Password"
        type: "password"
        required: true

zookeeper:
  __metadata: 
    label: "Zookeeper configuration"
  external:
    __metadata:
      label: "External"
      type: "boolean"
      required: true
  name:
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName:
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag:
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "integer"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  port:
    __metadata:
      label: "Port"
      type: "string"
      required: true
  serverPort:
    __metadata:
      label: "Server port"
      type: "string"
      required: true
  leaderElectionPort:
    __metadata:
      label: "Leader election port"
      type: "string"
      required: true
  persistence:
    __metadata: 
      label: "Persistence"
    pvcName:
      __metadata:
        label: "PVC name"
        type: "string"
        required: true
    size:
      __metadata:
        label: "Size"
        type: "string"
        required: true
  config:
    __metadata: 
      label: "Configuration"   
    tickTime:
      __metadata:
        label: "Tick time"
        type: "integer"
        required: true
    initLimit:
      __metadata:
        label: "Init limit"
        type: "integer"
        required: true
    syncLimit:
      __metadata:
        label: "Sync limit"
        type: "integer"
        required: true
    dataDir:
      __metadata:
        label: "Data directory"
        type: "string"
        required: true
    dataLogDir:
      __metadata:
        label: "Data log directory"
        type: "string"
        required: true

kafka:
  __metadata: 
    label: "Kafka configuration"
  external:
    __metadata:
      label: "External"
      type: "boolean"
      required: true
  name:
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName:
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag:
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "integer"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  port:
    __metadata:
      label: "Port"
      type: "string"
      required: true
  persistence:
    __metadata: 
      label: "Persistence"
    pvcName:
      __metadata:
        label: "PVC name"
        type: "string"
        required: true
    size:
      __metadata:
        label: "Size"
        type: "string"
        required: true

db:
  __metadata: 
    label: "configuration"
  external:
    __metadata:
      label: "External"
      type: "boolean"
      required: true
  wipeAndInit:
    __metadata:
      label: "wipe and initialise"
      type: "boolean"
      required: true
  name:
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName:
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag:
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "integer"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  host:
    __metadata:
      label: "Host"
      type: "string"
      required: true
  port:
    __metadata:
      label: "Port"
      type: "string"
      required: true
  provider:
    __metadata:
      label: "Provider"
      type: "string"
      required: true
  protocol:
    __metadata:
      label: "Protocol"
      type: "string"
      required: true
  auth:
    __metadata: 
      label: "Auth"
    username:
      __metadata:
        label: "Username"
        type: "string"
        required: true
    password:
      __metadata:
        label: "Password"
        type: "password"
        required: true
  dbPrefix:
    __metadata:
      label: "Prefix"
      type: "string"
      required: true
  activationsTable:
    __metadata:
      label: "Activations table"
      type: "string"
      required: true
  actionsTable:
    __metadata:
      label: "Actions table"
      type: "string"
      required: true
  authsTable:
    __metadata:
      label: "Auths table"
      type: "string"
      required: true
  persistence:
    __metadata: 
      label: "Persistence"
    pvcName:
      __metadata:
        label: "PVC name"
        type: "string"
        required: true
    size:
      __metadata:
        label: "Size"
        type: "string"
        required: true

nginx:
  __metadata: 
    label: "NGINX Configuration"
  name: 
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName: 
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag: 
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "string"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  httpPort: 
    __metadata:
      label: "HTTP port"
      type: "string"
      required: true
  httpsPort: 
    __metadata:
      label: "HTTPS port"
      type: "string"
      required: true
  httpsAdminPort: 
    __metadata: 
      label: "HTTPS admin port"
      type: "string"
      required: true
  httpsNodePort:
    __metadata: 
      label: "HTTPS node port"
      type: "string"
      required: true

controller:
  __metadata:
    label: Controller configuration
  name: 
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName: 
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag: 
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "string"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  port:
    __metadata: 
      label: "Port"
      type: "string"
      required: true
  options:
    __metadata: 
      label: "Options"
      type: "string"
      required: false
  jvmHeapMB: 
    __metadata: 
      label: "JVM heap memory (MB)"
      description: "The maximum Java heap size in megabytes (MB)"
      type: "string"
      required: true
  jvmOptions:
    __metadata:
      label: "JVM options"
      type: "string"
      required: false
  limits:
    actionsSequenceMaxlength:
      __metadata:
        label: "Actions sequence max length"
        required: true
    triggersFiresPerminute: 
      __metadata:
        label: "Triggers fires per minute"
        required: true
    actionsInvokesPerminute: 
      __metadata:
        label: "Actions invokes per minute"
        required: true
    actionsInvokesConcurrent: 
      __metadata:
        label: "Actions invokes concurrent"
        required: true

invoker:
  __metadata:
    label: Invoker Configuration
  name: 
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName: 
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag: 
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "string"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  port:
    __metadata: 
      label: "Port"
      type: "string"
      required: true
  options:
    __metadata: 
      label: "Options"
      type: "string"
      required: false
  jvmHeapMB: 
    __metadata: 
      label: "JVM heap memory (MB)"
      description: "The maximum Java heap size in megabytes (MB)"
      type: "string"
      required: true  
  jvmOptions:
    __metadata:
      label: "JVM options"
      type: "string"
      required: false 
  containerFactory:
    dind:
      __metadata:
        label: "dind"
        type: "boolean"
        required: true
    useRunc:
      __metadata:
        label: "useRunc"
        type: "boolean"
        required: true
    impl: 
      __metadata:
        label: "impl"
        type: "string"
        required: true
    kubernetes:
      replicaCount:
        __metadata:
          label: "Replica count"
          type: "string"
          required: true
      agent:
        name:
          __metadata: 
            label: "Name"
            type: "string"
            required: true
        imageName:
          __metadata:
            label: "Image name"
            type: "string"
            required: true
        imageTag: 
          __metadata:
            label: "Image tag"
            type: "string"
            required: true
        imagePullPolicy:
          __metadata:
            label: "Image pull policy"
            type: "string"
            required: true
        enabled: 
          __metadata: 
            label: "Enabled"
            type: "boolean"
            required: true
        port:
          __metadata:
            label: "Port"
            type: "string"
            required: true
    containerNetwork:
      __metadata:
        label: "Container network"
        type: "string"
        required: true
    kubeDNS:
      __metadata:
        label: "Kubernetes DNS"
        type: "string"
        required: true

apigw:
  __metadata:
    label: "API gateway configuration"
  name: 
    __metadata:
      label: "Name"
      type: "string"
      required: true
  imageName: 
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag: 
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount:
    __metadata:
      label: "Replica count"
      type: "string"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string"
      required: true
  apiPort:
    __metadata: 
      label: "API port"
      type: "string"
      required: true
  mgmtPort:
    __metadata: 
      label: "Management port"
      type: "string"
      required: true

redis:
  __metadata:
    label: "Redis configuration"
  name:
    __metadata:
      label: "Redis"
      type: "string"
      required: true
  imageName:
    __metadata:
      label: "Image name"
      type: "string"
      required: true
  imageTag:
    __metadata:
      label: "Image tag"
      type: "string"
      required: true
  imagePullPolicy:
    __metadata:
      label: "Image pull policy"
      type: "string"
      required: true
  replicaCount: 
    __metadata:
      label: "Replica count"
      type: "string"
      required: true
  restartPolicy:
    __metadata:
      label: "Restart policy"
      type: "string" 
      required: true
  port:
    __metadata:
      label: "Port"
      type: "string"
      required: true
  persistence:
    __metadata:
      label: "Persistence"
    pvcName:
      __metadata:
        label: "Persistance PVC name"
        type: "string"
        required: true
    size:
      __metadata:
        label: "Persistance size"
        type: "string"
        required: true
 
providers:
  __metadata:
    label: "OpenWhisk providers configuration"
  db:
    __metadata:
      label: "Database configuration"
    external:
      __metadata:
        label: "External"
        type: "boolean"
        required: true
    host:
      __metadata:
        label: "Host"
        type: "string"
        required: true
        required: true
    port:
      __metadata:
        label: "Port"
        type: "string"
        required: true
    protocol:
      __metadata:
        label: "Protocol"
        type: "string"
        required: true
    username:
      __metadata:
        label: "Username"
        type: "string"
        required: true
    password:
      __metadata:
        label: "Password"
        type: "password"
        required: true

  alarm:
    __metadata:
      label: "configuration"
    enabled:
      __metadata:
        label: "Enabled"
        type: "boolean"
        required: true
    name:
      __metadata:
        label: "Name"
        type: "string"
        required: true
    imageName:
      __metadata:
        label: "Image name"
        type: "string"
        required: true
    imageTag:
      __metadata:
        label: "Image tag"
        type: "string"
        required: true
    imagePullPolicy:
      __metadata:
        label: "Image pull policy"
        type: "string"
        required: true
    replicaCount: 
      __metadata:
        label: "Replica count"
        type: "string"
        required: true
    restartPolicy:
      __metadata:
        label: "Restart policy"
        type: "string"
        required: true
    apiPort:
      __metadata:
        label: "API port"
        type: "string"
        required: true
    dbPrefix:
      __metadata:
        label: "DB prefix"
        type: "string"
        required: true
    persistence:
      __metadata:
        label: "Persistence"
      pvcName: 
        __metadata:
          label: "PVC name"
          type: "string"
          required: true
      size:
        __metadata:
          label: "Size"
          type: "string"
          required: true

  kafka:
    __metadata:
      label: "Kafka configuration"
    enabled:
      __metadata:
        label: "Enabled"
        type: "boolean"
        required: true
    name:
      __metadata:
        label: "Name"
        type: "string"
        required: true
    imageName:
      __metadata:
        label: "Image name"
        type: "string"
        required: true
    imageTag:
      __metadata:
        label: "Image tag"
        type: "string"
        required: true
    imagePullPolicy:
      __metadata:
        label: "Image pull policy"
        type: "string"
        required: true
    replicaCount:
      __metadata:
        label: "Replica count"
        type: "string"
        required: true
    restartPolicy:
      __metadata:
        label: "Restart policy"
        type: "string"
        required: true
    apiPort: 
      __metadata:
        label: "API port"
        type: "string"
        required: true
    dbPrefix:
      __metadata:
        label: "DB prefix"
        type: "string"
        required: true

  cloudant:
    __metadata:
      label: "Cloudant configuration"
    enabled:
      __metadata:
        label: "Enabled"
        type: "boolean"
        required: true
    name:
      __metadata:
        label: "Name"
        type: "string"
        required: true
    imageName:
      __metadata:
        label: "Image name"
        type: "string"
        required: true
    imageTag:
      __metadata:
        label: "Image tag"
        type: "string"
        required: true
    imagePullPolicy:
      __metadata:
        label: "Image pull policy"
        type: "string"
        required: true
    replicaCount: 
      __metadata:
        label: "Replica count"
        type: "string"
        required: true
    restartPolicy:
      __metadata:
        label: "Restart policy"
        type: "string"
        required: true
    apiPort:
      __metadata:
        label: "API port"
        type: "string"
        required: true
    dbPrefix:
      __metadata:
        label: "DB prefix"
        type: "string"
        required: true
    persistence:
      __metadata:
        label: "Persistence"
      pvcName:
        __metadata:
          label: "PVC name"
          type: "string"
          required: true
      size:
        __metadata:
          label: "Size"
          type: "string"
          required: true

affinity:
  __metadata:
    label: "Affinity configuration"
  enabled:
    __metadata:
      label: "Enabled"
      type: "boolean"
      required: true
  coreNodeLabel:
    __metadata:
      label: "Core node label"
      type: "string"
      required: true
  edgeNodeLabel:
    __metadata:
      label: "Edge node label"
      type: "string"
      required: true
  invokerNodeLabel:
    __metadata:
      label: "Invoker node label"
      type: "string"
      required: true
  providerNodeLabel:
    __metadata:
      label: "Provider node label"
      type: "string"
      required: true