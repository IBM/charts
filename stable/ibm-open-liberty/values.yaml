###############################################################################
# Copyright (c) 2017 IBM Corp.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
###############################################################################

###############################################################################
## Common image variables
###############################################################################
image:
  repository: open-liberty
  tag: javaee8
  pullPolicy: IfNotPresent
  pullSecret: ""

  readinessProbe: {}
  # Example:
  # readinessProbe:
  #   httpGet:
  #     path: /custom/app
  #     port: 9080
  #   initialDelaySeconds: 3
  #   periodSeconds: 5

  livenessProbe: {}
  # Example:
  # livenessProbe:
  #   httpGet:
  #     path: /custom/health
  #     port: 9080
  #   initialDelaySeconds: 40
  #   periodSeconds: 10

  extraEnvs: []
  # Example:
  # extraEnvs:
  # - name: FOO
  #   valueFrom:
  #     secretKeyRef:
  #       key: FOO
  #       name: secret-resource
  # - name: BAR
  #   value: bar

  lifecycle: {}
  # Example:
  # lifecycle:
  #   postStart:
  #     exec:
  #       command: ["/bin/sh", "-c", "echo Hello from the postStart handler > /usr/share/message"]
  #   preStop:
  #     exec:
  #       command: ["/usr/sbin/nginx","-s","quit"]

  serverOverridesConfigMapName: ""
  # Server Configuration Overrides
  # Example:
  # serverOverridesConfigMapName: "custom-server-configmap"

  extraVolumeMounts: []
  # Example:
  # extraVolumeMounts:
  #   - name: podinfo
  #     mountPath: /podinfo
  #     readOnly: false

  security: {}
  # Example:
  # security:
  #   securityContext:
  #     privileged: false
  #     readOnlyRootFilesystem: false
  #     allowPrivilegeEscalation: false
  #     capabilities:
  #       drop:
  #       - ALL

resourceNameOverride: ""

deployment:
  annotations: {}
  # Example:
  # annotations:
  #   prometheus.io/scheme: "http"
  #   prometheus.io/scrape: "true"

  labels: {}
  # Example:
  # labels:
  #   environment: "dev"
  #   tier: "backend"

pod:
  annotations: {}
  # Example:
  # annotations:
  #   prometheus.io/scheme: "http"
  #   prometheus.io/scrape: "true"

  security: {}
  # Example:
  # security:
  #   hostNetwork: false
  #   hostPID: false
  #   hostIPC: false
  #   securityContext:
  #     runAsNonRoot: true
  #     runAsUser: 1001

  labels: {}
  # Example:
  # labels:
  #   environment: "dev"
  #   tier: "backend"

  extraInitContainers: []
  # Example:
  # extraInitContainers:
  # - name: init-myservice
  #   image: busybox
  #   command: ['sh', '-c', 'until nslookup myservice; do echo waiting for myservice; sleep 2; done;']

  extraContainers: []
  # Example:
  # extraContainers:
  # - name: my-sidecar
  #  image: nginx:latest
  # - name: lemonldap-ng-controller
  #  image: lemonldapng/lemonldap-ng-controller:0.2.0
  #  args:
  #    - /lemonldap-ng-controller
  #    - --alsologtostderr
  #    - --configmap=$(POD_NAMESPACE)/lemonldap-ng-configuration
  #  env:
  #    - name: POD_NAME
  #      valueFrom:
  #        fieldRef:
  #          fieldPath: metadata.name
  #  volumeMounts:
  #  - name: copy-portal-skins
  #    mountPath: /srv/var/lib/lemonldap-ng/portal/skins

  extraVolumes: []
  # Example:
  # extraVolumes:
  #   - name: podinfo
  #     downwardAPI:
  #       items:
  #         - path: "labels"
  #           fieldRef:
  #             fieldPath: metadata.labels
  #         - path: "annotations"
  #           fieldRef:
  #             fieldPath: metadata.annotations

service:
  enabled: true
  name: ""
  port: 9443
  targetPort: 9443
  type: NodePort
  annotations: {}
  # Example:
  # annotations:
  #   prometheus.io/path: "/custom/metrics"
  #   prometheus.io/port: "9157"

  labels: {}
  # Example:
  # labels:
  #   environment: "dev"
  #   tier: "backend"

  extraPorts: []
  # Example:
  # extraPorts:
  #   - protocol: TCP
  #     port: 9444
  #     targetPort: 9444
  #     name: vhost-https

  extraSelectors: {}
  # Example:
  # extraSelectors:
  #   "environment": "dev"
  #   "tier": "backend"

jmsService:
  enabled: false
  port: 7286
  targetPort: 7286
  type: NodePort

iiopService:
  enabled: false
  nonSecurePort: 2809
  nonSecureTargetPort: 2809
  securePort: 9402
  secureTargetPort: 9402
  type: NodePort

ssl:
  enabled: true
  useClusterSSLConfiguration: false
  createClusterSSLConfiguration: false

ingress:
  enabled: false
  rewriteTarget: "/"
  path: "/"
  host: ""
  secretName: ""
  annotations: {}
  # Example:
  # annotations:
  #   nginx.ingress.kubernetes.io/enable-cors: "true"
  #   nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, OPTIONS"

  labels: {}
  # Example:
  # labels:
  #   environment: "dev"
  #   tier: "backend"

###############################################################################
## Persistence Storage
###############################################################################

## Persistence is disabled by default, set Enabled: true to use
persistence:
  name: "liberty-pvc"
  ## Tranlog requires a Persistence Storage volume size minimum of 1Gi
  size: "1Gi"

  useDynamicProvisioning: true

  fsGroupGid:

  ## Specify the name of the StorageClass
  ## Setting StorageClass: "" will use whatever storageClass is currently
  ## setup as the Default
  storageClassName: ""

  # if your not using dynamic provisioning, you can use selectors to
  # refine the binding process. You cannot specify a selector if your using dynamic provisioning!
  selector:
    label: ""
    value: ""

###############################################################################
## Logs
###############################################################################
logs:
  persistLogs: false
  persistTransactionLogs: false
  consoleFormat: json
  consoleLogLevel: info
  consoleSource: message,trace,accessLog,ffdc

###############################################################################
## MicroProfile
###############################################################################
microprofile:
  health:
    enabled: false

###############################################################################
## Monitoring
###############################################################################
monitoring:
  enabled: false

###############################################################################
## Auto scaling
###############################################################################
replicaCount: 1
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 50

###############################################################################
## Resource constraints
###############################################################################
resources:
  constraints:
    enabled: false
  requests:
    cpu: 500m
    memory: 512Mi
  limits:
    cpu: 500m
    memory: 512Mi

###############################################################################
## Architecture
###############################################################################
# Specify architecture (amd64, ppc64le, s390x) and weight to be
# used for scheduling as follows:
#   0 - Do not use
#   1 - Least preferred
#   2 - No preference
#   3 - Most preferred
arch:
  amd64: "2 - No preference"
  ppc64le: "2 - No preference"
  s390x: "2 - No preference"

###############################################################################
## Environmental variables
###############################################################################
env:
  jvmArgs: ""

###############################################################################
## Session cache
###############################################################################
sessioncache:
  hazelcast:
    enabled: false
    embedded: false
    image:
      repository: hazelcast/hazelcast
      tag: "3.10.6"
      pullPolicy: IfNotPresent

###############################################################################
## Role-Based Access Control
###############################################################################
rbac:
  install: true
