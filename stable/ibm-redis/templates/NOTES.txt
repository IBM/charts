{{- include "sch.config.init" (list . "redis.sch.chart.config.values") -}}
{{- $fullName := include "sch.names.fullCompName" (list . "") -}}
Redis can be accessed via port {{ .Values.redis.port }} and Sentinel can be accessed via port {{ .Values.sentinel.port }} on the following DNS name from within your cluster:
{{ $fullName }}.{{ .Release.Namespace }}.svc

To connect to your Redis server via the cli:

{{- if .Values.auth }}
1. To retrieve the redis password:
   echo $(kubectl get secret {{ $fullName }}-authsecret -o "jsonpath={.data['password']}" | base64 --decode)

2. Connect to the Redis master pod that you can use as a client. By default the {{ $fullName }}-server-0 pod is configured as the master:

   kubectl exec -it {{ $fullName }}-server-0 sh -n {{ .Release.Namespace }}

3. Connect using the Redis CLI (inside container):

   redis-cli -a <REDIS-PASS-FROM-SECRET>
{{- else }}
1. Run a Redis pod that you can use as a client:

   kubectl exec -it {{ $fullName }}-server-0 sh -n {{ .Release.Namespace }}

2. Connect using the Redis CLI:

  redis-cli -h {{ $fullName }}.{{ .Release.Namespace }}.svc
{{- end }}
