{{- include "sch.config.init" (list . "ibm-wex-prod.sch.chart.config.values") -}}
{{- $compConfigmapName := .sch.chart.components.wex.configmap.name }}
{{- $compConfigmapLabelComponent := .sch.chart.components.wex.configmap.label.component }}

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "sch.names.fullCompName" (list . $compConfigmapName ) }}
  labels:
    app: {{ template "{{ .Chart.Name }}.fullname" . }}
    chart: {{ .Chart.Name }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
    component: wex-configmap
data:
  ZK_REPLICAS: "{{ .Values.config.replica }}"
  ZK_MIN_HEAPSIZE: "{{ .Values.config.minMemory }}"
  ZK_MAX_HEAPSIZE: "{{ .Values.config.maxMemory }}"
  SOLR_MAX_HEAP: "{{ .Values.discovery.maxMemory }}"
  HADOOP_HEAPSIZE: "{{ .Values.hdp.maxMemoryMB }}"
  DFS_REPLICATION: "{{ .Values.hdp.dfsReplication }}"
  YARN_HEAPSIZE: "{{ .Values.hdp.yMaxMemoryMB }}"
  YARN_NODEMANAGER_RESOURCE_MEMORY_MB: "{{ .Values.hdp.worker.nm.memoryMB }}"
  YARN_NODEMANAGER_RESOURCE_CPU_VCORES: "{{ .Values.hdp.worker.nm.cpu }}"
  DOCPROC_MAX_MEMORY: "{{ .Values.orchestrator.docproc.maxMemory }}"
  DOCPROC_DRIVER_MAX_MEMORY: "{{ .Values.orchestrator.docproc.driverMaxMemory }}"
  DOCPROC_WORKER_NUM: "{{ .Values.orchestrator.docproc.workerNum }}"
  WLP_JVM_MAX_MEMORY: "{{ .Values.gateway.server.maxMemory }}"
