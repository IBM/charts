{{- if and (.Capabilities.APIVersions.Has "monitoringcontroller.cloud.ibm.com/v1") .Values.dashboard.enabled -}}
apiVersion: monitoringcontroller.cloud.ibm.com/v1
kind: MonitoringDashboard
metadata:
  name: "{{ .Release.Name }}-pod-overview"
  labels:
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
    heritage: "{{ .Release.Service }}"
    app: "{{ .Release.Name }}-pod-overview"
    app.kubernetes.io/instance: {{ .Release.Name }}
    app.kubernetes.io/managed-by: {{ .Release.Service }}
    app.kubernetes.io/name: {{ .Release.Name }}-pod-overview
    helm.sh/chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
spec:
  enabled: true
  data: |-
{{ .Files.Get "ibm_cloud_pak/pak_extensions/dashboards/ibm-edge-computing-pod-overview-dashboard.json" | indent 4 }}
{{- end }}
