###############################################################################
# Licensed Materials - Property of IBM.
# Copyright IBM Corporation 2018, 2019. All Rights Reserved.
# U.S. Government Users Restricted Rights - Use, duplication or disclosure
# restricted by GSA ADP Schedule Contract with IBM Corp.
#
# Contributors:
#  IBM Corporation - initial API and implementation
###############################################################################
# Global section
global:
  monitoring:
    # To be used when entitled to base services only for limiting deployment of services
    #advanced: false
    # Enable services required for resource monitoring; false for eventing only
    resources: true
    # Enable services required for event monitoring
    eventing: true
  ingress:
# Domain hostname for the ingress services -- usually proxy hostname
    domain: ""
# Domain port for the ingress services if not the default -- used for Multicloud Manager and kube-system installations
    port: 443
# Secret name containing client authorization data for ingress (eg ibmcloudappmgmt-ingress-client)
    clientSecret: ""
# Secret name containing https tls authorization data (eg ibmcloudappmgmt-ingress-tls)
    tlsSecret: ""
# Values Applying to ICAM-MCM Integrated Deployment
  icammcm:
    ingress:
# Proxy hostname for the Ingress service
      domain: ""
# Secret name containing client authorization data for Proxy Ingress (eg ibmcloudappmgmt-ingress-client)
      clientSecret: ""
# Secret name containing https tls authorization data for Proxy Ingress (eg ibmcloudappmgmt-ingress-tls)
      tlsSecret: ""
# Required only for deploying with MCM in RHOS - master CA domain of ICP cluster
  masterCA: ""
# The master IP from the cloud environment -- "X.X.X.X" format
  masterIP: ""
# The port to communicate via using the master IP from the cloud environment
  masterPort: 8443
# The proxy IP from the cloud environment -- "X.X.X.X" format
  proxyIP: ""
# Determine the size of the resources used by each container.
# size0(_amd64) is the minimum, best for small demos and test. It is sized for amd64 clusters
# size0_ppc64le is the minimum, best for small demos and test. It is sized for ppc64le clusters
# size1(_amd64) is the default configuration for initial production sizing. It is sized for amd64 clusters
# size1_ppc64le is the default configuration for initial production sizing. It is sized for ppc64le clusters
# Larger sizes will be added as found appropriate.
  environmentSize: "size0_amd64"
# Optional prefix for docker images; applies after the image repository value
# and before the image names
  imageNamePrefix: ""
  image:
# Repository URL for the location of the requisite docker images
    repository: ""
# Image pull secret name for accessing a secured image repository; not used for public repositories
    pullSecret: ""
# Policy for image pulling to be used by pods
  imagePullPolicy: IfNotPresent
# Image to be used across all test pods deployed by "helm test"
  icamTestImage: "ubi-base:1.0.0-201909161113"
# Number of Cassandra nodes to deploy
  cassandraNodeReplicas: 1
# Setup Cassandra superuser, which also sets Cassandra system_auth keyspace
# replication equal to cassandraNodeReplicas
  cassandra:
    superuserRole: true
# Kafka global section
  kafka:
# Cluster size for kafka statefulset
    clusterSize: 1
# Kafka insecure port for internal communication
    insecurePort: 9092
# Kafka secure port for internal communication
    #securePort: "9093"
# Kafkarest insecure port for internal communication
    kafkaRestInsecurePort: 8080
# Kafkarest secure port for internal communication
    #kafkaRestSecurePort: "443"
# Partitions sets the number of kafka partitions for the listed Kafka
# topics. The metric_json topic is used by the event-evaluator and
# metric services to process incoming metrics.
    partitions:
      metricJSON: 12
# Replication factor for metric related Kafka topics.
# By default, topics have a replication factor equal to the Kafka clustersize,
# up to a maximum of 3.  This variable allows the metric topics to be customized
# to a specific replication factor, since metrics is significantly larger than
# other topics and a smaller replication factor (2) may be desired.
    replication:
      metrics: 1

# Zookeeper global section
  zookeeper:
# Cluster size for zookeeper statefulset
    clusterSize: 1
# Peristent volume configuration for statefulsets
  persistence:
# Optionally disable peristence for statefulsets
    enabled: true
# Default storage class type for stateful services; lower precedence than
# storageClassOption values
    storageClassName: ""
# Individual claims for persistence can be of different types if desired.
# The storageClassOption determines the type of persistence to be used for each
# stateful service.
# "default" will use the cluster's default persistence class type
    storageClassOption:
      cassandradata: "default"
      cassandrabak: "none"
      couchdbdata: "default"
      datalayerjobs: "default"
      elasticdata: "default"
      kafkadata: "default"
      zookeeperdata: "default"
# The claim sizes for the various statefulsets may be controlled using
# their storageSize value.
    storageSize:
      cassandradata: "50Gi"
      cassandrabak: "50Gi"
      couchdbdata: "5Gi"
      datalayerjobs: "5Gi"
      elasticdata: "50Gi"
      kafkadata: "5Gi"
      zookeeperdata: "1Gi"
# ASM global section
# Setting ASM license enforcement key to accept
# The user will be prompted with and required to accept the ICAM product licenses prior to install
  license: ""
  asm:
# Internal cluster communication for ASM services is either HTTPS or HTTP
    disableHTTPS: true
# Internal cluster communication for ASM services can require credenitals or not
    authentication: false
# Cluster size for Elasticsearch
  elasticsearch:
    replicaCount: 1
# Horizontal Pod Autoscalers
# The minimum number of replicas the HPAs will use across the product
  minReplicasHPAs: 1
# The maximum number of replicas the HPAs will use across the product
  maxReplicasHPAs: 3

# Metric service configuration
  metric:
# The retention setting defines the number of days
# to keep raw data. Changing this value effects the
# retention period for new metric data points only.
# If this value is changed after product install,
# helm upgrade must be performed in order for the
# updated value to take effect.
    retention:
      rawMaxDays: 8
    summary:
# Indicates whether or not metrics should be summarized.
      enabled: false

# You can override the preceding minimums and maximums the HPAs will use
# on a per component basis by uncommenting the following:
#agentbootstrap:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#agentmgmt:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#alarmeventsrc:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#amui:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#applicationmgmt:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#config:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#event-evaluator:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#event-observer:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#metric:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#metricprovider:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#synthetic:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#temacomm:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#temaconfig:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#temasda:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5
#threshold:
#  minReplicasHPAs: 3
#  maxReplicasHPAs: 5

# Jaeger settings for MetricService and Open Transaction Tracking
  metricC8Rep: "{'class':'SimpleStrategy','replication_factor':1}"
  openttC8Rep: 1

#######################
# ASM FEATURE TOGGLES #
#######################
# These are used to disable subcharts from ASM not applicable to the ICAM product
# Also disables the duplicated component definitions of Cassandra, Kafka and
# Zookeeper.
asm:
  cassandra:
    enabled: false
  elasticsearch:
    enabled: true
  kafka:
    enabled: false
  kubernetesObserver:
    enabled: false
  layout:
    enabled: true
  merge:
    enabled: false
  noi:
    enabled: false
  search:
    enabled: true
  uiApi:
    enabled: true
  zookeeper:
    enabled: false

# CEM configuration section
ibm-cem:
  # CEM license accept
  license: "accept"
  # This value signals to the CEM containers the current product name
  # CEM configuration and deployment will vary depending on base or advanced
  # product entitlement.
  productName: "IBM Cloud App Management Advanced"
  # Cassandra Settings
  cassandra:
    # Disable duplicated component definition for Cassandra
    enabled: false
  # CouchDB Settings
  couchdb:
    # Cluster size for CouchDB statefulset
    clusterSize: 1
  # Datalayer Settings
  datalayer:
    # Cluster size for Datalayer statefulset
    clusterSize: 1
  # Kafka Settings
  kafka:
  # Disable duplicated component definition for Kafka
    enabled: false
  # Redis Settings
  ibmRedis:
    enabled: false
  # Zookeeper Settings
  zookeeper:
    # Disable duplicated component definition for Zookeeper
    enabled: false
  # Email settings
  email:
    # Set this property to the Email address that should be shown as the sender (From) of the message.
    mail: noreply-your-company-notification@your-company.com
    # Set this property to "smtp" to use a mail relay server. This requires setting the other smtp-prefixed properties as well.
    # Set to "direct" (default) to send directly to the recipient's server.
    # Use "api" if the "sendgrid" service is available. This requires the "apikey" property also to be set.
    #
    type: direct
    # When "type" is set to "smtp", set this to the host name of your smtp server used for mail relay.
    smtphost: ''
    # When "type" is set to "smtp", set this to the port number used by the smtp server specified by the "smtphost" value.
    smtpport: ''
    # User authentication required for SMTP connection. Set this to true if the SMTP server requires authentication.
    smtpauth: true
    # When "type" is set to "smtp", set this to false to allow self signed certificates when connecting via TLS.
    # By default this is set to true to enforce TLS authorization checking.
    smtprejectunauthorized: true
  # Nexmo settings
  nexmo:
    # Default Nexmo number from which to send SMS messages
    sms: ''
    # Default Nexmo number from which to send voice messages
    voice: ''
    # true to use Nexmo, false disables
    enabled: false
    # Override numbers used for selected countries
    # Property names are country codes, values are objects with "voice" and "sms" properties
    # Enter as a JSON object in quotes
    numbers: '{}'
    # Numbers from countries to which messages must not be sent
    # Enter as a comma separated list of strings
    countryblacklist: '[]'
  # ICP Broker settings
  icpbroker:
    # The cluster administrator user name.
    adminusername: 'admin'
# Redis Configuration
ibmRedis:
  auth:
    authSecretName: "{{ .Release.Name }}-cem-ibm-redis-cred-secret"
  persistence:
    enabled: false
  replicas:
    servers: 1
    sentinels: 3

createCRD: true

ibm-cloud-appmgmt-prod:
  streamingservice:
    enabled: false

# Tags for controlling deployment options
# 'advanced' should only be enabled when entitled to the advanced product.
tags:
  advanced: true
