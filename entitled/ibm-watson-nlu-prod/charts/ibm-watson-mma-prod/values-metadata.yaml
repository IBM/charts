# IMPORTANT: MMA SECRET INFO IS NOT INCLUDED IN THIS FILE BECAUSE IT SHOULD NOT BE IN VALUES.yaml TO BEGIN WITH!
# DO NOT ADD THESE VALUES HERE; REMOVE THEM FROM VALUES.yaml INSTEAD.

# Security context details are also not added here yet. They should not be until we discuss as a team whether or not
# they really belong in the values.yaml file.

# common image variables
global:
  __metadata:
    label: "Global config"
    description: "Global config shared among components"
  mma:
    v1Port:
      __metadata:
        label: "MMA v1 Port"
        description: "Port for running MMA v1"
        type: "number"
        required: true
    v2Port:
      __metadata:
        label: "MMA v2 Port"
        description: "Port for running MMA v2"
        type: "number"
        required: true
    database:
      enableV1:
        __metadata:
          label: "Enable MMA v1"
          description: "Enable MMA v1 functionality"
          type: "boolean"
          required: true
      enableV2:
        __metadata:
          label: "Enable MMA v2"
          description: "Enable MMA v2 functionality"
          type: "boolean"
          required: true
  tls:
    secret:
      nameTpl:
        __metadata:
          label: "TLS Secret Name Template"
          description: "Template to specify the secret name that contains tls key and cert"
          type: "string"
          required: true
      fixedName:
        __metadata:
          label: "TLS Secret Fixed Name"
          description: "Default fixed secret name that contains tls key and cert"
          type: "string"
          required: true
      fieldServerCertificate:
        __metadata:
          label: "TLS Secret Server Certificate Field Name"
          description: "Secret field name that references the public TLS cert"
          type: "string"
          required: true
      fieldServerKey:
        __metadata:
          label: "TLS Secret Server Certificate Field Name"
          description: "Secret field name that references the private TLS key"
          type: "string"
          required: true
  postgres:
    authSecret:
      nameTpl:
        __metadata:
          label: "Postgres Auth Secret Name Template"
          description: "Postgres auth secret name template"
          type: "string"
          required: true
      suPasswordField:
        __metadata:
          label: "Postgres Auth Secret Super User Password Field Name"
          description: "Postgres auth secret super user password field name"
          type: "string"
          required: true
    endpointPort:
      __metadata:
        label: "Postgres Endpoint Port"
        description: "Postgres endpoint port; should match external port defined in Postgres chart"
        type: "number"
        required: true
  icpDockerRepo:
    __metadata:
      label: "Docker repo to pull images"
      description: "Docker Repo for all Images in the chart"
      type: "string"
      required: false
      hidden: true
  imagePullSecretName:
    __metadata:
      label: "additionalimagepullSecrets "
      description: "additionalimagepullSecrets for the docker images"
      type: "string"
      required: false
# Common configs applying to the overall MMA deployment
replicas:
  __metadata:
    label: "MMA Pod Number"
    description: "Number of pods to be deployed for MMA in Kubernetes"
    type: "string"
    required: true
# Model Management API container specs
modelManagementApi:
  __metadata:
    label: "Model Management API"
    description: "MMA v1 & v2 container specs"
    type: "string"
    required: true
  image:
    repository:
      __metadata:
        label: "MMA Repository"
        description: "Repository for MMA"
        type: "string"
        required: true
    tag:
      __metadata:
        label: "MMA Image Tag"
        description: "Image Tag for MMA"
        type: "string"
        required: true
  resources:
    requests:
      memory:
        __metadata:
          label: "MMA Requests Memory"
          description: "Requested Memory for MMA container"
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "MMA Requests CPU"
          description: "Requested CPU for MMA container"
          type: "string"
          required: true
    limits:
      memory:
        __metadata:
          label: "MMA Limits Memory"
          description: "Max memory for MMA container"
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "MMA Limits CPU"
          description: "Max CPU for MMA container"
          type: "string"
          required: true
# Postgres dependency settings
postgres:
  __metadata:
    label: "Postgres Configuration"
    description: "Configuration values for Postgres subchart"
  nameOverride:
    __metadata:
      label: "Postgres Name Override"
      description: "Postgres name override"
      type: "string"
      required: true
  auth:
    pgSuperuserName:
      __metadata:
        label: "Postgres Super Username"
        description: "Postgres super username"
        type: "string"
        required: true
    authSecretName:
      __metadata:
        label: "Postgres Auth Secret Name"
        description: "Postgres auth secret name"
        type: "string"
        required: true

# Common Product info (set by Umbrella Chart)
product:
  __metadata:
    label: "Product"
    description: "Watson NLU Product"
    type: "string"
    required: true
  name:
    __metadata:
      label: "Product Name"
      description: "Catalog name of chart's product"
      type: "string"
      required: true
  id:
    __metadata:
      label: "Product ID"
      description: "Catalog ID of chart's product"
      type: "string"
      required: true
  version:
    __metadata:
      label: "Product Version"
      description: "Version of chart's product"
      type: "string"
      required: true

# Test image info (currently uses curl only; no DVTs yet)
tests:
  __metadata:
    label: "Helm tests"
    description: "Curl image for helm tests"
    type: "string"
    required: true
  image:
    repository:
      __metadata:
        label: "Curl Repository"
        description: "Curl image for helm tests"
        type: "string"
        required: true
    tag:
      __metadata:
        label: "Curl Image Tag"
        description: "Curl image tag for helm tests"
        type: "string"
        required: true
