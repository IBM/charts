

{{- include "sch.config.init" (list . "cs.sch.chart.config.values") -}}
{{- $commonServiceCompName  :=  .sch.chart.components.cs.name -}}

apiVersion: v1
kind: Service
metadata:
  name: {{ include "sch.names.fullCompName" (list . $commonServiceCompName) | quote }}
  labels:
{{ include "sch.metadata.labels.standard" (list . $commonServiceCompName) | indent 4 }}
spec:
  type: ClusterIP
  clusterIP: None
  selector:
{{ include "sch.metadata.labels.standard" (list . $commonServiceCompName) | indent 4 }}
  ports:
      # Requests typically route through the external model mesh server
    - name: model-mesh
      port: 8033
      targetPort: 8033
# Uncomment this block to expose the Common Service through the service.
# Leaving this commented out since it isn't used in practice, but is sometimes useful for testing.
#    - name: model-runtime
#      port: 8085
#      targetPort: 8085
