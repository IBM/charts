{{- include "sch.config.init" (list . "asm.sch.chart.config.values") -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "sch.names.fullName" (list .) }}
  labels:
{{ include "sch.metadata.labels.standard" (list . "") | indent 4 }}
data:
  application.yml: |-
    # add config for node server
    webServerPort: {{ .Values.httpPort }}
    webServerProtocol: http{{ if not .Values.global.asm.disableHTTPS }}s{{ end }}
    # config for individual service connections
    topologyServiceHost: {{ .Release.Name }}-topology
    topologyServicePort: 8080
    topologyServiceTenantId: {{ .Values.tenantId }}
    topologyServiceRootPath: /1.0/topology/
    topologyServiceTimeout: 30
    topologyServiceProtocol: http{{ if not .Values.global.asm.disableHTTPS }}s{{ end }}
    layoutServiceHost: {{ .Release.Name }}-layout
    layoutServicePort: 7084
    layoutServiceRootPath: /1.0/layout/
    layoutServiceTimeout: 30
    layoutServiceProtocol: http{{ if not .Values.global.asm.disableHTTPS }}s{{ end }}
    searchServiceHost: {{ .Release.Name }}-search
    searchServicePort: 7080
    searchServiceRootPath: /1.0/search/
    searchServiceTimeout: 30
    searchServiceProtocol: http{{ if not .Values.global.asm.disableHTTPS }}s{{ end }}
    mergeServiceHost: {{ .Release.Name }}-merge
    mergeServicePort: 7082
    mergeServiceRootPath: /1.0/merge/
    mergeServiceTimeout: 30
    mergeServiceProtocol: http{{ if not .Values.global.asm.disableHTTPS }}s{{ end }}
    sslTrustPath: /opt/ibm/netcool/asm/security
    disableDashAuth: true
    logLevel: {{ .Values.logging.level }}
