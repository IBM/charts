# Default values for smartpages.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

## Images
callerapi:
    name: callerapi
    repository: mycluster.icp:8500/sp1/callerapi
    tag: latest
    pullPolicy: Always
    replicaCount: 1
    maxUnavailableCount: 1
    resources:
      # requests:
      #   memory: 256Mi
      #   cpu: "0.2"
      limits:
        # memory: 491.52Mi
        memory: 480Mi



spbackend:
    name: spbackend
    repository: mycluster.icp:8500/sp1/backend
    tag: latest
    pullPolicy: Always
    replicaCount: 1
    maxUnavailableCount: 1
    # pullSecrets:
    #   - myRegistrKeySecretName
    baseDB: BASECA
    baseDBServer: thrown1.fyre.ibm.com
    baseDBPort: 50000
    baseDBUser: CABASEUSER
    resources:
      limits:
        # memory: 491.52Mi
        memory: 640Mi
    backendPath:
    backendPort: 8080
#    SOCKET_SECURE: false
#    SOCKET_PORT: 8080
    callerAPIProtocol: https
    fullCallerAPIPath: /api/v1/actions
    nodeTLSRejectUnauthorized: 0
    ldap: false #string - value would either be true of false,
    ldapFilter: "(&(cn={{username}})(objectclass=person))"
    ldapDN: cn=root
    ldapURL: ldap://172.16.194.107
    ldapPort: 389
    ldapBase: dc=hqpsidcdom,dc=com
    userName: "Scott Nguyen"
    ldapCrtName:
    ldapSelfSignedCrt:

spfrontend:
    name: spfrontend
    repository: mycluster.icp:8500/sp1/spfrontend
    tag: latest
    pullPolicy: Always
    replicaCount: 1
    maxUnavailableCount: 1
    # pullSecrets:
    #   - myRegistrKeySecretName
    backendHost: 9.30.250.82
    backendPort:
    backendPath: backendsp1
    frontendHost: 9.30.250.82
    frontendPath: frontendsp1
#    SOCKET_HOST:
#    SOCKET_PATH:
#    SOCKET_PORT: $SOCKET_PORT
    # limitsCPU: "0.4"
    resources:
      limits:
        # memory: 491.52Mi
        memory: 480Mi
    # requestsCPU: "0.2"
    # requestsMemory: "500Mi"
    nodeTLSRejectUnauthorized: 0
    sso:
    bxDomainName: 9.30.250.82
    ldap: false #string - value would either be true of false

consumers:
  - name: postprocessing
    arch: amd64
    repository: mycluster.icp:8500/sp1/postprocessing
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        # memory: 491.52Mi
        memory: 480Mi
  - name: pdfprocess
    arch: amd64
    repository: mycluster.icp:8500/sp1/pdfprocess
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        # memory: 491.52Mi
        memory: 960Mi
  - name: utf8process
    arch: amd64
    repository: mycluster.icp:8500/sp1/utf8process
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 960Mi
  - name: setup
    arch: amd64
    repository: mycluster.icp:8500/sp1/setup
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 480Mi
  - name: ocr-extraction
    arch: amd64
    repository: mycluster.icp:8500/sp1/ocrextraction
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 1440Mi
  - name: classifyprocess-classify
    arch: amd64
    repository: mycluster.icp:8500/sp1/classify
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 960Mi
  - name: processing-extraction
    arch: amd64
    repository: mycluster.icp:8500/sp1/processingextraction
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 1440Mi
  - name: interprocessing
    arch: amd64
    repository: mycluster.icp:8500/sp1/interprocessing
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 480Mi
  - name: reanalyze
    arch: amd64
    repository: mycluster.icp:8500/sp1/reanalyze
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 720Mi
  - name: updatefiledetail
    arch: amd64
    repository: mycluster.icp:8500/sp1/updatefiledetail
    tag: latest
    pullPolicy: Always
    # pullSecrets:
    #   - myRegistrKeySecretName
    replicaCount: 1
    maxUnavailableCount: 1
    numWorkers: 2
    resources:
      limits:
        memory: 480Mi

## Dependencies

rabbitmq:
  image:
    repository: mycluster.icp:8500/sp1/rabbitmq
    tag: latest
    pullPolicy: Always
  resources:
    limits:
      memory: 960Mi
  rabbitmq:
    username: PoC
    ## If unset a random password will be generated
    # password: mypassword
  nodeSelector:
    celerysp1: baca


## Services

callerapisvc:
  name: callerapi
  type: NodePort
#  externalPort:
  internalPort: 8080
spbackendsvc:
  name: spbackend
  type: NodePort
  internalPort: 8080
#  externalPort: 30102

spfrontendsvc:
  name: spfrontend
  type: NodePort
  internalPort: 8080
  #externalPort: 30102


######################
ingress:
  enabled: true
  # Used to create an Ingress record.
  tls:
    hosts:
    - 9.30.250.82

nodeSelector:
  celerysp1: baca


global:
  arch: amd64
#  pullSecrets:
#    - myRegistrKeySecretName
  redis:
    image:
      repository: mycluster.icp:8500/sp1/redis
      tag: latest
      pullPolicy: Always
  redisresources:
      limits:
        memory: 640Mi      
  sslValidate: false #false = self-sign, true= not self-sign
  namespace:
    name: sp1
  mongo:
    image:
      repository: mycluster.icp:8500/sp1/mongo
      tag: latest
      pullPolicy: Always
      replicaCount: 1
    type: LoadBalancer
    mongoPort: 27017
    nodeSelector:
      mongosp1: baca
    mongoLimitedMemory: 640Mi
    wiredTigerCache: ".3"
  mongoadmin:
    image:
      repository: mycluster.icp:8500/sp1/mongo
      tag: latest
      pullPolicy: Always
      replicaCount: 1
    type: LoadBalancer
    mongoAdminPort: 27017
    nodeSelector:
      mongo-adminsp1: baca
    mongoAdminLimitedMemory: 640Mi
    wiredTigerCache: ".3"
  celery:
    processTimeout: 300
  configs:
    claimname: sp-config-pvc
  logs:
    claimname: sp-log-pvc
    logLevel: debug
  data:
    claimname: sp-data-pvc