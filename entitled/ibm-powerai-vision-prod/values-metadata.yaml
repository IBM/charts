# IBM_SHIP_PROLOG_BEGIN_TAG
# *****************************************************************
#
# Licensed Materials - Property of IBM
#
# (C) Copyright IBM Corp. 2018. All Rights Reserved.
#
# US Government Users Restricted Rights - Use, duplication or
# disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
#
# *****************************************************************
# IBM_SHIP_PROLOG_END_TAG
image:
  __metadata:
    label: "PowerAI Vision Release Information"
  releaseTag:
    __metadata:
      label: "PowerAI Vision Release"
      description: "Release number - used to match the docker container tags"
      type: "string"
      required: true
  repoPrefix:
    __metadata:
      label: "Docker repository prefix"
      description: "The prefix for the docker image repository - eg: mycluster.icp:8500/default/"
      type: "string"
      default: "mycluster.icp:8500/default/"
      required: false
  pullPolicy:
     __metadata:
      label: "Docker image pull policy"
      description: "Always, Never, or IfNotPresent. Defaults to IfNotPresent"
      type: "string"
      immutable: false
      required: true
      hidden: true
      options:
      - label: "IfNotPresent"
        value: "IfNotPresent"
      - label: "Always"
        value: "Always"
      - label: "Never"
        value: "Never"

persistence:
  __metadata:
    label: "Data persistence configuration"
  useDynamicProvisioning:
   __metadata:
      name: "useDynamicProvisioning"
      label: "Use dynamic provisioning for persistent volume"
      description: "If checked (and your system supports it), storage will be automatically provisioned.  If false, you can create your persistent volumes manually."
      type: "boolean"
      immutable: false
      required: false

poweraiVisionDataPvc:
  __metadata:
    label: "Data volume configuration"
    description: ""
  name:
    __metadata:
      label: ""
      description: ""
      type: "string"
      immutable: true
      required: true
      hidden: true
  persistence:
    existingClaimName:
      __metadata:
        label: "Existing volume claim"
        description: "By default a new persistent volume claim will be created. Specify an existing claim here if one is available."
        type: "string"
        immutable: false
        required: false
    storageClassName:
      __metadata:
        label: "Existing storage class name"
        description: "Choose a specific storage class name. Defaults to the default storage class in the cluster."
        type: "string"
        immutable: false
        required: false
    size:
      __metadata:
        label: "Size of the volume"
        description: "This is where all your databases, images, videos etc. upload to - so don't skimp.  At least 40Gi"
        type: "string"
        immutable: false
        required: true

ingress:
  __metadata:
    label: "PowerAI Ingress"
  enabled:
    __metadata:
      label: "Enabled (do not disable)"
      description: "Enables access to the PowerAI Web UI and APIs"
      immutable: true
      type: "boolean"
      required: true
      hidden: true
  hosts:
    __metadata:
      label: "Host for the ingress  (leaving blank is recommended)."
      description: "What hostname (not IP) in your cluster should host this ingress?  Use - \"\" to allow any/all of your proxy servers to access the ingress."
      type: "string"
      required: true
      hidden: true
  tls:
    __metadata:
      label: "Custom TLS Certificate"
    secretName:
      __metadata:
        label: "Secret holding the TLS certificate"
        description: "A self-signed certificate is used by default.  If you wish to use your own certificate, you can create a secret with the cert, then point to the secret here.  https://github.com/kubernetes/contrib/tree/master/ingress/controllers/nginx/examples/tls"
        type: "string"
        required: false

poweraiVisionMongodb:
  __metadata:
    label: "MongoDB Database Access (leaving as default is recommended)"
    description: "PowerAI Vision leverages MongoDB as a database - you can customize the default username and password used."
  mongodbAdminUsername:
    __metadata:
      label: "Username for mongodb"
      description: "Default mongodb username - set or leave as default"
      type: "string"
      required: true
  mongodbAdminPassword:
    __metadata:
      label: "Password for mongodb"
      description: "Default password for mongodb - set or leave as default"
      type: "password"
      required: true

poweraiVisionPostgres:
  __metadata:
    label: "Postgres Database Access (leaving as default is recommended)"
    description: "PowerAI Vision leverages Postgres as a database - you can customize the default password used."
  postgresPassword:
    __metadata:
      label: "Password for Postgres"
      description: "Default password for Postgres - set or leave as default"
      type: "password"
      required: true

poweraiVisionVideoRabbitmq:
  __metadata:
    label: "RabbitMQ Message Queue Access (leaving as default is recommended)"
  rabbitmqUsername:
    __metadata:
      label: "Username for rabbitmq"
      description: "Default rabbitmq username - set or leave as default."
      type: "string"
      required: true
  rabbitmqPassword:
    __metadata:
      label: "Password for rabbitmq"
      description: "Default password for rabbitmq - set or leave as default"
      type: "password"
      required: true
  rabbitmqVhost:
    __metadata:
      label: ""
      description: ""
      immutable: true
      hidden: true

poweraiVisionKeycloak:
  __metadata:
    label: "Keycloak Access (leaving as default is recommended)"
    description: "PowerAI Vision leverages Keycloak as an Identity Provider"
  keycloakAdminPassword:
    __metadata:
      label: "Password for Keycloak"
      description: "Default password for keycloak - leave as default"
      type: "password"
      required: true

poweraiVisionDevicePlugins:
  __metadata:
    label: "PowerAI Vision Device Plugins"
    description: "Enabling scheduling for a device type will make those devices available to all installed PowerAI Vision instances. Only one PowerAI Vision instance should enable scheduling for a device type to avoid allocating the same device to multiple instances."
  enableFpgaDaemon:
   __metadata:
      name: "enableFpgaDaemon"
      label: "Enable FPGA Scheduling"
      description: "If checked, nodes will report supported FPGA cards to the cluster which can be then be used when deploying models that support FPGAs"
      type: "boolean"
      immutable: false
      required: false

resources:
  __metadata:
    label: "Resource requirements are automatically managed"
    hidden: true
