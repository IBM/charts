## Metadata for <watson-common-ingress-auth-intercept> configuration
## This metadata is used to augment the value.yaml to drive IPC UI for configuration of the Helm chart installation

## Service configuration metadata
---
global:
  __metadata:
    label: 'Global'
    description: 'Global configuration'
  icpDockerRepo:
    __metadata:
      label: 'ICP Docker repository'
      description: 'The ICP Docker repository URL. https://{{icpDockerRepo}}'
      immutable: false
      required: false
  imagePullSecretName:
    __metadata:
      label: 'ICP pull secret name'
      description: 'The ICP Pull secret name'
      immutable: false
      required: false
  sch:
    enabled:
      __metadata:
        name: ''
        label: ''
        description: 'Enable sch'
        type: 'boolean'
  appName:
    __metadata:
      label: 'App Name'
      description: 'The application name to use in sch templates'
      immutable: false
      required: false
      type: 'string'

serviceAccount:
  __metadata:
    label: 'Service account'
    description: 'Service account name or template'
  name:
    __metadata:
      label: 'Service account'
      description: 'Service account name'
      type: 'string'
privilegedServiceAccount:
  __metadata:
    label: 'Privileged service account'
    description: 'Privileged service account name or template'
  name:
    __metadata:
      label: 'Service account'
      description: 'Service account name'
      type: 'string'

schConfigName:
  __metadata:
    label: 'sch template name'
    description: 'Template name to render the component names'
    immutable: false
    required: false

arch:
  __metadata:
    label: 'Architechture'
    description: 'Architechture to use'
    type: 'string'
    immutable: false
    required: true
addon:
  __metadata:
    label: 'Addon'
    description: 'Addon configuration'
  displayName:
    __metadata:
      label: 'Addon name'
      description: 'Addon name to use in the addons page'
      type: 'string'
      immutable: false
      required: true
  serviceId:
    __metadata:
      label: 'The service id to be used in public urls'
      description: 'The service id to be used in public urls like tooling'
      type: 'string'
      immutable: false
      required: true
  version:
    __metadata:
      label: 'The version of the addon'
      description: 'The version of the addon that will be shown to users'
      type: 'string'
      immutable: false
      required: false
  longDescription:
    __metadata:
      label: 'Detailed explanation of the addon'
      description: 'Detailed explanation of the addon to be exposed in the Addon details page'
      type: 'string'
      immutable: false
      required: false
  shortDescription:
    __metadata:
      label: 'Short description of the addon'
      description: 'Short description (up to 140 characters) of the addon to be exposed in the addons grid page'
      type: 'string'
      immutable: false
      required: false
  maxInstances:
    __metadata:
      label: "Addon's maximum number of instances"
      description: 'Maximum instances of an addon that can be provisioned in ICPD cluster'
      type: 'number'
      immutable: false
      required: false
  maxDeployments:
    __metadata:
      label: "Addon's maximum number of deployments"
      description: 'Maximum deployments of an addon that can be provisioned in ICPD cluster'
      type: 'number'
      immutable: false
      required: false
  productImages:
    __metadata:
      label: 'Product images'
      description: 'Number of images to show in the addon detail page'
      type: 'number'
      immutable: false
      required: false
  productDocs:
    __metadata:
      label: 'Link to a page describing how to deploy the addon'
      description: 'Link to a page describing how to deploy the addon in ICP for Data'
      type: 'string'
      immutable: false
      required: false
  deployDocs:
    __metadata:
      label: 'Link to a page describing how to deploy the addon'
      description: 'Link to a page describing how to deploy the addon in ICP for Data'
      type: 'string'
      immutable: false
      required: false
  gettingStartedDocs:
    __metadata:
      label: 'Getting Started documentation page'
      description: 'Link to a page describing how to get started with the service'
      type: 'string'
      immutable: false
      required: false
  apiReferenceDocs:
    __metadata:
      label: 'API Reference documentation page'
      description: 'Link to a page describing how to use the service API'
      type: 'string'
      immutable: false
      required: false
  organizationId:
    __metadata:
      label: 'Organization GUID'
      description: 'Organization UUID to be used as bluemix-organization-guid in X-Watson-UserInfo'
      type: 'string'
      immutable: false
      required: false
  accountId:
    __metadata:
      label: 'Account GUID'
      description: 'Account UUID to be used as bluemix-account-id in X-Watson-UserInfo'
      type: 'string'
      immutable: false
      required: false
  planId:
    __metadata:
      label: 'Plan GUID'
      description: 'Plan UUID to be used as bluemix-plan-id in X-Watson-UserInfo'
      type: 'string'
      immutable: false
      required: false
  instanceId:
    __metadata:
      label: 'Instance GUID'
      description: 'Instance UUID to be used as bluemix-instance-id in X-Watson-UserInfo'
      type: 'string'
      immutable: false
      required: false
  showUserManagement:
    __metadata:
      label: 'Show user management'
      description: 'Set to true if you would like to allow user management from an instance dashboard'
      type: 'boolean'
      immutable: false
      required: false
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  showCredentials:
    __metadata:
      label: 'Show credentials'
      description: 'Set to true if you would like to show the generated service credentials in the instance dashboard'
      type: 'boolean'
      immutable: false
      required: false
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  disableUpgrade:
    __metadata:
      label: 'Disable helm upgrade'
      description: 'Set to true if you would like the chart to fail on helm upgrade'
      type: 'boolean'
      immutable: false
      required: false
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  tls:
    image:
      repository:
        __metadata:
          label: 'Docker repository'
          description: 'Docker image repository'
          type: 'string'
          immutable: false
          required: true
      tag:
        __metadata:
          label: 'Docker tag'
          description: 'Docker image tag'
          type: 'string'
          immutable: false
          required: true
  networkPolicy:
    enabled:
      __metadata:
        label: 'Enabled'
        description: 'Whether to enable the NetworkPolicy'
        type: 'boolean'
        immutable: false
        required: false
        options:
          - label: 'True'
            value: true
          - label: 'False'
            value: false
    additionalLabels:
      __metadata:
        label: 'additionalLabels configuration'
        description: 'Any additional pod labels your service would like to access'

additionalServices:
  __metadata:
    label: 'Additional services'
    description: 'Additional services configuration'
backendService:
  __metadata:
    label: 'Backend service'
    description: 'Backend service configuration'
  name:
    __metadata:
      label: 'Service name'
      description: 'The kubernetes service name for the backend service'
      type: 'string'
      immutable: false
      required: false
  nameTemplate:
    __metadata:
      label: 'Service template name'
      description: "The helm template to generate the name. Only used if 'name' is empty"
      type: 'string'
      immutable: false
      required: false
      hidden: true
  namespace:
    __metadata:
      label: 'Kubernetes namespace where the service is deployed'
      description: 'Kubernetes namespace where the backend service is deployed '
      type: 'string'
      immutable: false
      required: false
  port:
    __metadata:
      label: 'Port'
      description: 'Port to access the backend service'
      type: 'number'
      immutable: false
      required: true
  rewriteTarget:
    __metadata:
      label: 'Rewrite target'
      description: "Set to '/' if you want requests to have their path stripped"
      type: 'string'
      immutable: false
      required: false
      hidden: true
  secure:
    __metadata:
      label: 'Secure'
      description: 'set to true if your service backend requires https'
      type: 'boolean'
      immutable: false
      required: false
      hidden: true
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  exposeAPI:
    __metadata:
      label: 'Expose API'
      description: 'set to true if your service backend exposes an API'
      type: 'boolean'
      immutable: false
      required: false
      hidden: true
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  nginxDirectives:
    __metadata:
      label: 'Nginx directives'
      description: 'Set nginx directives to be used by zen nginx'
      type: 'string'
      immutable: false
      required: false
      hidden: true
  brokerPath:
    __metadata:
      label: 'Broker path'
      description: 'If specified, the service will receive provisioning requests'
      type: 'string'
      immutable: false
      required: false
      hidden: true

tooling:
  __metadata:
    label: 'Tooling'
    description: 'Tooling information'
  enabled:
    __metadata:
      label: 'Enabled'
      description: 'Set to true if tooling is available'
      type: 'boolean'
      immutable: false
      required: false
      hidden: true
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  name:
    __metadata:
      label: 'Service name'
      description: 'The kubernetes service name for the tooling service'
      type: 'string'
      immutable: false
      required: false
  nameTemplate:
    __metadata:
      label: 'Service template name'
      description: "The helm template to generate the name. Only used if 'name' is empty"
      type: 'string'
      immutable: false
      required: false
      hidden: true
  namespace:
    __metadata:
      label: 'Kubernetes namespace where the service is deployed'
      description: 'Kubernetes namespace where the tooling service is deployed '
      type: 'string'
      immutable: false
      required: false
  port:
    __metadata:
      label: 'Port'
      description: 'Port to access the tooling service'
      type: 'number'
      immutable: false
      required: true
  rewriteTarget:
    __metadata:
      label: 'Rewrite target'
      description: "Set to '/' if you want requests to have their path stripped"
      type: 'string'
      immutable: false
      required: false
      hidden: true
  secure:
    __metadata:
      label: 'Service tooling requires https'
      description: 'Set to true if your service backend requires https'
      type: 'boolean'
      immutable: false
      required: false
      hidden: true
      options:
        - label: 'True'
          value: true
        - label: 'False'
          value: false
  nginxDirectives:
    __metadata:
      label: 'Nginx directives'
      description: 'Set nginx directives to be used by zen nginx'
      type: 'string'
      immutable: false
      required: false
      hidden: true

addonService:
  __metadata:
    label: 'Addon configuration'
    description: 'Addon service configuration'
  port:
    __metadata:
      label: 'Port'
      description: 'Port exposed in addon service'
      type: 'number'
      immutable: false
      required: true
  replicas:
    __metadata:
      label: 'Addon service pod replicas'
      description: 'Number of replicas of addon service pods if autoscaling is disabled'
      type: 'number'
      immutable: false
      required: false
  image:
    repository:
      __metadata:
        label: 'Docker repository'
        description: 'Docker image repository'
        type: 'string'
        immutable: false
        required: true
    tag:
      __metadata:
        label: 'Docker tag'
        description: 'Docker image tag'
        type: 'string'
        immutable: false
        required: true
    containerPort:
      __metadata:
        label: 'Port'
        description: 'Port exposed in addon deployment'
        type: 'number'
        immutable: false
        required: true
    imagePullPolicy:
      __metadata:
        label: 'Image pull policy'
        description: 'The image pull policy. Default: Always'
        type: 'string'
        immutable: false
        required: false
  zenCoreApiUrl:
    __metadata:
      label: 'Zen core API URL'
      description: 'The service url where the Zen core API is'
      type: 'string'
      immutable: false
      required: false
  zenCoreUrl:
    __metadata:
      label: 'Zen core URL'
      description: 'The url where zen-core service is'
      type: 'string'
      immutable: false
      required: false
  zenNginxUrl:
    __metadata:
      label: 'Zen nginx URL'
      description: 'The service url where the nginx is'
      type: 'string'
      immutable: false
      required: false
  zenNamespace:
    __metadata:
      label: 'Zen namespace'
      description: 'The namespace where ICP for Data is running'
      type: 'string'
      immutable: false
      required: false
resources:
  __metadata:
    label: 'Resource Configuration'
    description: 'Controls the memory and CPU requirements'
  requests:
    cpu:
      __metadata:
        label: 'CPU request'
        description: 'The requested CPU'
        type: 'string'
        required: true
    memory:
      __metadata:
        label: 'Memory request'
        description: 'The memory request'
        type: 'string'
        required: true
  limits:
    cpu:
      __metadata:
        label: 'CPU limit'
        description: 'The CPU limit'
        type: 'string'
        required: true
    memory:
      __metadata:
        label: 'Memory limit'
        description: 'The memory limit'
        type: 'string'
        required: true
livenessProbe:
  __metadata:
    label: 'Liveness Probe'
    description: 'Advanced control over liveness probe'
  initialDelaySeconds:
    __metadata:
      label: 'Initial Delay'
      description: 'Time in seconds before polling the liveness probe endpoint'
      type: 'number'
  periodSeconds:
    __metadata:
      label: 'Initial Delay'
      description: 'Time in seconds before polling the liveness probe endpoint'
      type: 'number'
autoscaling:
  __metadata:
    name: ''
    label: ''
    description: 'Configuration of autoscaling'
  enabled:
    __metadata:
      name: ''
      label: ''
      description: 'Enable autoscaling'
      type: 'boolean'
  minReplicas:
    __metadata:
      name: ''
      label: ''
      description: 'Minimum pods for autoscaling'
      type: 'number'
  maxReplicas:
    __metadata:
      name: ''
      label: ''
      description: 'Maximum pods for autoscaling'
      type: 'number'
  targetCPUUtilizationPercentage:
    __metadata:
      name: ''
      label: ''
      description: 'Target average utilization'
      type: 'string'
clusterDomain:
  __metadata:
    name: "clusterDomain"
    label: "Cluster domain used by in-cluster KubeDNS names."
    description: "Specify only if your KubeDNS service names does not end with cluster.local."
    type: "string"
    required: false
    hidden: true
