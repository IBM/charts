{{/*
########################################################################
#
# Licensed Materials - Property of IBM
#
# 5725Q09
#
# (C) Copyright IBM Corp.
#
# 2020 All Rights Reserved
#
# US Government Users Restricted Rights - Use, duplication or disclosure 
# restricted by GSA ADP Schedule Contract with IBM Corp.
#
########################################################################
*/}}
{{- include "sch.config.init" (list . "sch.chart.config.values") -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "sch.names.fullName" (list .) }}-config
  labels:
{{ include "sch.metadata.labels.standard" (list . "") | indent 4 }}
data:
  datasource.yaml: |2
    apiVersion: 1
    deleteDatasources:
    - name: IncidentMetrics
      orgId: 1
    - name: noi-events by firstOccurrence
      orgId: 1
    - name: noi-events by lastOccurrence
      orgId: 1
    - name: eventreduction
      orgId: 1
    - name: rba-statistics
      orgId: 1
    - name: rba-execution-records
      orgId: 1
    datasources:
    - name: IncidentMetrics
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-incidents
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: createTime
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false
    - name: noi-events by firstOccurrence
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-noi-events
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: event.firstOccurrence
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false
    - name: noi-events by lastOccurrence
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-noi-events
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: event.lastOccurrence
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false
    - name: eventreduction
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-event-reduction
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: timestamp
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false
    - name: rba-statistics
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-rba-statistics
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: statisticsTimestamp
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false
    - name: rba-execution-records
      type: elasticsearch
      access: proxy
      orgId: 1
      url: http://{{ .Release.Name }}-elasticsearch.{{ .Release.Namespace }}.svc:9200
      user:
      database: logstash-rba-execution-records
      basicAuth:
      basicAuthUser:
      basicAuthPassword:
      withCredentials:
      isDefault:
      jsonData:
        tlsAuth: false
        tlsAuthWithCACert: false
        tlsSkipVerify: false
        esVersion: 60
        timeField: createdAt
      secureJsonData:
        tlsCACert:
        tlsClientCert:
        tlsClientKey:
        password:
        basicAuthPassword:
      version: 1
      editable: false


  dashboard.yaml: |2
    apiVersion: 1
    providers:
    - name: 'NOI Provider'
      orgId: 1
      folder: 'NOI'
      folderUid: ''
      type: file
      disableDeletion: false
      editable: false
      updateIntervalSeconds: 10
      allowUiUpdates: false
      options:
        path: /etc/grafana/provisioning/dashboards

  reduction.json: |2
    {
    "annotations": {
        "list": [
        {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
        }
        ]
    },
    "editable": true,
    "gnetId": null,
    "graphTooltip": 0,
    "id": 4,
    "iteration": 1592225147986,
    "links": [],
    "panels": [
        {
        "cacheTimeout": null,
        "datasource": "eventreduction",
        "description": "Total number of raw events that occurred in the selected time frame",
        "fieldConfig": {
            "defaults": {
            "custom": {},
            "mappings": [
                {
                "id": 0,
                "op": "=",
                "text": "N/A",
                "type": 1,
                "value": "null"
                }
            ],
            "nullValueMode": "connected",
            "thresholds": {
                "mode": "absolute",
                "steps": [
                {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                }
                ]
            },
            "unit": "none"
            },
            "overrides": []
        },
        "gridPos": {
            "h": 4,
            "w": 7,
            "x": 0,
            "y": 0
        },
        "id": 2,
        "interval": null,
        "links": [],
        "maxDataPoints": 100,
        "options": {
            "colorMode": "value",
            "fieldOptions": {
            "calcs": [
                "sum"
            ]
            },
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
            "calcs": [
                "sum"
            ],
            "values": false
            }
        },
        "pluginVersion": "7.0.0",
        "targets": [
            {
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "1y",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "select field",
                "hide": true,
                "id": "1",
                "type": "count"
                },
                {
                "field": "remaining_id.keyword",
                "hide": true,
                "id": "3",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                },
                {
                "field": "select field",
                "id": "4",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "all",
                    "pipelineAgg": "1"
                    },
                    {
                    "name": "remaining",
                    "pipelineAgg": "3"
                    }
                ],
                "settings": {
                    "script": "params.all-params.remaining"
                },
                "type": "bucket_script"
                }
            ],
            "refId": "A",
            "timeField": "timestamp"
            }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Total event occurrences",
        "type": "stat"
        },
        {
        "cacheTimeout": null,
        "datasource": "eventreduction",
        "description": "Percentage decrease in events by deduplication and grouping in the selected time frame",
        "fieldConfig": {
            "defaults": {
            "custom": {},
            "decimals": 0,
            "mappings": [
                {
                "id": 0,
                "op": "=",
                "text": "N/A",
                "type": 1,
                "value": "null"
                }
            ],
            "nullValueMode": "connected",
            "thresholds": {
                "mode": "absolute",
                "steps": [
                {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                }
                ]
            },
            "unit": "percentunit"
            },
            "overrides": []
        },
        "gridPos": {
            "h": 4,
            "w": 5,
            "x": 7,
            "y": 0
        },
        "id": 4,
        "interval": null,
        "links": [],
        "maxDataPoints": 100,
        "options": {
            "colorMode": "value",
            "fieldOptions": {
            "calcs": [
                "sum"
            ]
            },
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
            "calcs": [
                "mean"
            ],
            "values": false
            }
        },
        "pluginVersion": "7.0.0",
        "targets": [
            {
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "1y",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "select field",
                "hide": true,
                "id": "1",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "var1",
                    "pipelineAgg": "select metric"
                    }
                ],
                "settings": {},
                "type": "count"
                },
                {
                "field": "remaining_id.keyword",
                "hide": true,
                "id": "3",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                },
                {
                "field": "select field",
                "id": "4",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "all",
                    "pipelineAgg": "1"
                    },
                    {
                    "name": "remaining",
                    "pipelineAgg": "3"
                    }
                ],
                "settings": {
                    "script": "(params.all-params.remaining-params.remaining)/(params.all-params.remaining)"
                },
                "type": "bucket_script"
                }
            ],
            "query": "",
            "refId": "A",
            "timeField": "timestamp"
            }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Reduction",
        "type": "stat"
        },
        {
        "cacheTimeout": null,
        "datasource": "eventreduction",
        "description": "Percentage decrease in events by deduplication and grouping in the $noi_interval interval with the highest decrease",
        "fieldConfig": {
            "defaults": {
            "custom": {},
            "decimals": 0,
            "mappings": [
                {
                "id": 0,
                "op": "=",
                "text": "N/A",
                "type": 1,
                "value": "null"
                }
            ],
            "nullValueMode": "connected",
            "thresholds": {
                "mode": "absolute",
                "steps": [
                {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                }
                ]
            },
            "unit": "percentunit"
            },
            "overrides": []
        },
        "gridPos": {
            "h": 4,
            "w": 5,
            "x": 12,
            "y": 0
        },
        "id": 8,
        "interval": null,
        "links": [],
        "maxDataPoints": 100,
        "options": {
            "colorMode": "value",
            "fieldOptions": {
            "calcs": [
                "sum"
            ]
            },
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
            "calcs": [
                "max"
            ],
            "values": false
            }
        },
        "pluginVersion": "7.0.0",
        "targets": [
            {
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "$noi_interval",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "select field",
                "hide": true,
                "id": "1",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "var1",
                    "pipelineAgg": "select metric"
                    }
                ],
                "settings": {},
                "type": "count"
                },
                {
                "field": "remaining_id.keyword",
                "hide": true,
                "id": "3",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                },
                {
                "field": "select field",
                "id": "4",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "all",
                    "pipelineAgg": "1"
                    },
                    {
                    "name": "remaining",
                    "pipelineAgg": "3"
                    }
                ],
                "settings": {
                    "script": "(params.all-params.remaining-params.remaining)/(params.all-params.remaining)"
                },
                "type": "bucket_script"
                }
            ],
            "query": "",
            "refId": "A",
            "timeField": "timestamp"
            }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Peak Reduction ($noi_interval interval)",
        "type": "stat"
        },
        {
        "cacheTimeout": null,
        "datasource": "eventreduction",
        "description": "Remaining events after deduplication and grouping in the selected time frame",
        "fieldConfig": {
            "defaults": {
            "custom": {},
            "mappings": [
                {
                "id": 0,
                "op": "=",
                "text": "N/A",
                "type": 1,
                "value": "null"
                }
            ],
            "nullValueMode": "connected",
            "thresholds": {
                "mode": "absolute",
                "steps": [
                {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                }
                ]
            },
            "unit": "none"
            },
            "overrides": []
        },
        "gridPos": {
            "h": 4,
            "w": 7,
            "x": 17,
            "y": 0
        },
        "id": 3,
        "interval": null,
        "links": [],
        "maxDataPoints": 100,
        "options": {
            "colorMode": "value",
            "fieldOptions": {
            "calcs": [
                "sum"
            ]
            },
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "horizontal",
            "reduceOptions": {
            "calcs": [
                "sum"
            ],
            "values": false
            }
        },
        "pluginVersion": "7.0.0",
        "targets": [
            {
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "1y",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "remaining_id.keyword",
                "id": "1",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                }
            ],
            "refId": "A",
            "timeField": "timestamp"
            }
        ],
        "timeFrom": null,
        "timeShift": null,
        "title": "Remaining events",
        "type": "stat"
        },
        {
        "aliasColors": {},
        "bars": false,
        "dashLength": 10,
        "dashes": false,
        "datasource": "eventreduction",
        "description": "Displays\n- Total event occurrences,\n- Remaining events after deduplication and grouping\n\neach per $noi_interval time interval",
        "fieldConfig": {
            "defaults": {
            "custom": {}
            },
            "overrides": []
        },
        "fill": 1,
        "fillGradient": 0,
        "gridPos": {
            "h": 8,
            "w": 24,
            "x": 0,
            "y": 4
        },
        "hiddenSeries": false,
        "id": 7,
        "legend": {
            "avg": false,
            "current": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
        },
        "lines": true,
        "linewidth": 1,
        "nullPointMode": "null",
        "options": {
            "dataLinks": []
        },
        "percentage": false,
        "pointradius": 2,
        "points": false,
        "renderer": "flot",
        "seriesOverrides": [
            {
            "alias": "Total event occurrences",
            "color": "#009d9a"
            },
            {
            "alias": "Remaining events",
            "color": "#9f1853"
            }
        ],
        "spaceLength": 10,
        "stack": false,
        "steppedLine": false,
        "targets": [
            {
            "alias": "Total event occurrences",
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "$noi_interval",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "select field",
                "hide": true,
                "id": "1",
                "type": "count"
                },
                {
                "field": "remaining_id.keyword",
                "hide": true,
                "id": "3",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                },
                {
                "field": "select field",
                "id": "4",
                "meta": {},
                "pipelineVariables": [
                    {
                    "name": "all",
                    "pipelineAgg": "1"
                    },
                    {
                    "name": "remaining",
                    "pipelineAgg": "3"
                    }
                ],
                "settings": {
                    "script": "params.all-params.remaining"
                },
                "type": "bucket_script"
                }
            ],
            "refId": "A",
            "timeField": "timestamp"
            },
            {
            "alias": "Remaining events",
            "bucketAggs": [
                {
                "field": "timestamp",
                "id": "2",
                "settings": {
                    "interval": "$noi_interval",
                    "min_doc_count": 0,
                    "trimEdges": 0
                },
                "type": "date_histogram"
                }
            ],
            "metrics": [
                {
                "field": "remaining_id.keyword",
                "id": "1",
                "meta": {},
                "settings": {},
                "type": "cardinality"
                }
            ],
            "refId": "B",
            "timeField": "timestamp"
            }
        ],
        "thresholds": [],
        "timeFrom": null,
        "timeRegions": [],
        "timeShift": null,
        "title": "Incoming events over time (per $noi_interval interval)",
        "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
        },
        "type": "graph",
        "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
        },
        "yaxes": [
            {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
            },
            {
            "format": "short",
            "label": null,
            "logBase": 1,
            "max": null,
            "min": null,
            "show": true
            }
        ],
        "yaxis": {
            "align": false,
            "alignLevel": null
        }
        }
    ],
    "schemaVersion": 25,
    "style": "dark",
    "tags": [],
    "templating": {
        "list": [
        {
            "auto": false,
            "auto_count": 30,
            "auto_min": "10s",
            "current": {
            "selected": false,
            "text": "5m",
            "value": "5m"
            },
            "hide": 2,
            "label": null,
            "name": "noi_interval",
            "options": [
            {
                "selected": true,
                "text": "5m",
                "value": "5m"
            }
            ],
            "query": "5m",
            "refresh": 2,
            "skipUrlSync": false,
            "type": "interval"
        }
        ]
    },
    "time": {
        "from": "now-6h",
        "to": "now"
    },
    "timepicker": {
        "refresh_intervals": [
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
        ]
    },
    "timezone": "",
    "title": "Event reduction",
    "uid": "ZyBF0NzMz",
    "version": 1
    }

  incidents.json: |2
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
          "enable": true,
          "hide": true,
          "iconColor": "rgba(0, 211, 255, 1)",
          "name": "Annotations & Alerts",
          "type": "dashboard"
          }
        ]
      },
    "editable": false,
    "gnetId": null,
    "graphTooltip": 2,
    "id": 2,
    "iteration": 1596545745872,
    "links": [],
    "panels": [
      {
        "collapsed": false,
        "datasource": "IncidentMetrics",
        "gridPos": {
          "h": 1,
          "w": 24,
          "x": 0,
          "y": 0
        },
        "id": 4,
        "panels": [],
        "title": "Efficiency Dashboard",
        "type": "row"
      },
      {
        "datasource": "IncidentMetrics",
        "description": "The number of incidents opened in the selected time frame.",
        "fieldConfig": {
          "defaults": {
            "custom": {
              "align": null
            },
            "mappings": [],
            "thresholds": {
              "mode": "absolute",
              "steps": [
                {
                  "color": "rgb(0, 0, 0)",
                  "value": null
                }
              ]
            }
          },
          "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 12,
        "x": 0,
        "y": 1
      },
      "hideTimeOverride": true,
      "id": 12,
      "maxDataPoints": 200,
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "sum"
          ],
          "fields": "/^Count$/",
          "values": false
        }
      },
      "pluginVersion": "7.0.3",
      "targets": [
        {
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "5m",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "hide": false,
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "meta": {},
              "pipelineVariables": [
                {
                  "name": "total",
                  "pipelineAgg": "select metric"
                }
              ],
              "settings": {},
              "type": "count"
            }
          ],
          "query": "(priority:[[priority]])",
          "refId": "A",
          "timeField": "createTime"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Number of opened incidents",
      "type": "stat"
    },
    {
      "cacheTimeout": null,
      "datasource": "IncidentMetrics",
      "description": "The number of incidents closed in the selected time frame.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "mappings": [
            {
              "id": 0,
              "op": "=",
              "text": "N/A",
              "type": 1,
              "value": "null"
            }
          ],
          "nullValueMode": "connected",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(0, 0, 0)",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 12,
        "x": 12,
        "y": 1
      },
      "hideTimeOverride": true,
      "id": 10,
      "interval": null,
      "links": [],
      "maxDataPoints": 200,
      "options": {
        "colorMode": "value",
        "fieldOptions": {
          "calcs": [
            "mean"
          ]
        },
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "sum"
          ],
          "fields": "/^Count$/",
          "values": false
        }
      },
      "pluginVersion": "7.0.3",
      "targets": [
        {
          "bucketAggs": [
            {
              "fake": true,
              "field": "createTime",
              "id": "3",
              "settings": {
                "interval": "5m",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "incident",
              "id": "1",
              "meta": {},
              "settings": {},
              "type": "count"
            }
          ],
          "query": "(priority:[[priority]]) AND (state:closed)",
          "refId": "A",
          "timeField": "createTime"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Number of closed incidents",
      "type": "stat"
    },
    {
      "cacheTimeout": null,
      "datasource": "IncidentMetrics",
      "description": "The mean time from incident generation to resolution.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "decimals": 1,
          "mappings": [],
          "noValue": "N/A",
          "nullValueMode": "connected",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(0, 0, 0)",
                "value": null
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 0,
        "y": 4
      },
      "hideTimeOverride": true,
      "id": 6,
      "interval": null,
      "links": [],
      "maxDataPoints": 200,
      "options": {
        "colorMode": "value",
        "fieldOptions": {
          "calcs": [
            "mean"
          ]
        },
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "mean"
          ],
          "fields": "/^Average timeToResolve$/",
          "values": false
        }
      },
      "pluginVersion": "7.0.3",
      "targets": [
        {
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeToResolve",
              "id": "1",
              "meta": {},
              "settings": {},
              "type": "avg"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "A",
          "timeField": "createTime"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Mean time to incident resolution",
      "type": "stat"
    },
    {
      "cacheTimeout": null,
      "datasource": "IncidentMetrics",
      "description": "The mean time from incident generation to in progress for the first time.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "decimals": 1,
          "mappings": [
            {
              "id": 0,
              "op": "=",
              "text": "N/A",
              "type": 1,
              "value": "null"
            }
          ],
          "nullValueMode": "connected",
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(0, 0, 0)",
                "value": null
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 8,
        "y": 4
      },
      "hideTimeOverride": true,
      "id": 8,
      "interval": null,
      "links": [],
      "maxDataPoints": 200,
      "options": {
        "colorMode": "value",
        "fieldOptions": {
          "calcs": [
            "mean"
          ]
        },
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "horizontal",
        "reduceOptions": {
          "calcs": [
            "mean"
          ],
          "fields": "/^Average timeToRespond$/",
          "values": false
        }
      },
      "pluginVersion": "7.0.3",
      "targets": [
        {
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeToRespond",
              "id": "1",
              "meta": {},
              "settings": {},
              "type": "avg"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "A",
          "timeField": "createTime"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Mean time to respond to an incident",
      "type": "stat"
    },
    {
      "datasource": "IncidentMetrics",
      "description": "The total time all incidents have spent on hold within the selected time frame.",
      "fieldConfig": {
        "defaults": {
          "custom": {},
          "decimals": 1,
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "rgb(0, 0, 0)",
                "value": null
              }
            ]
          },
          "unit": "ms"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 8,
        "x": 16,
        "y": 4
      },
      "hideTimeOverride": true,
      "id": 14,
      "maxDataPoints": 200,
      "options": {
        "colorMode": "value",
        "graphMode": "none",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "sum"
          ],
          "fields": "/^Sum timeOnHold$/",
          "values": false
        }
      },
      "pluginVersion": "7.0.3",
      "targets": [
        {
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeOnHold",
              "id": "1",
              "inlineScript": null,
              "meta": {},
              "settings": {},
              "type": "sum"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "A",
          "timeField": "createTime"
        }
      ],
      "timeFrom": null,
      "timeShift": null,
      "title": "Time on hold",
      "type": "stat"
    },
    {
      "aliasColors": {},
      "bars": true,
      "dashLength": 10,
      "dashes": false,
      "datasource": "IncidentMetrics",
      "decimals": 0,
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 0,
        "y": 7
      },
      "hiddenSeries": false,
      "hideTimeOverride": true,
      "id": 16,
      "legend": {
        "avg": false,
        "current": false,
        "max": false,
        "min": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": false,
      "linewidth": 1,
      "maxDataPoints": 200,
      "nullPointMode": "null",
      "options": {
        "dataLinks": []
      },
      "percentage": false,
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "Priority 1",
          "bars": true,
          "color": "rgb(0, 45, 156)"
        },
        {
          "alias": "Priority 2",
          "bars": true,
          "color": "rgb(0, 157, 154)"
        },
        {
          "alias": "Priority 3",
          "bars": true,
          "color": "rgb(159, 24, 83)"
        },
        {
          "alias": "Priority 4",
          "bars": true,
          "color": "rgb(82, 4, 8)"
        },
        {
          "alias": "Priority 5",
          "bars": true,
          "color": "rgb(165, 110, 255)"
        }
      ],
      "spaceLength": 10,
      "stack": true,
      "steppedLine": false,
      "targets": [
        {
          "alias": "Priority 1",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "type": "count"
            }
          ],
          "query": "priority:[[priority]] AND priority:1",
          "refId": "A",
          "timeField": "createTime"
        },
        {
          "alias": "Priority 2",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "type": "count"
            }
          ],
          "query": "priority:[[priority]] AND priority:2",
          "refId": "B",
          "timeField": "createTime"
        },
        {
          "alias": "Priority 3",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "type": "count"
            }
          ],
          "query": "priority:[[priority]] AND priority:3",
          "refId": "C",
          "timeField": "createTime"
        },
        {
          "alias": "Priority 4",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "type": "count"
            }
          ],
          "query": "priority:[[priority]] AND priority:4",
          "refId": "D",
          "timeField": "createTime"
        },
        {
          "alias": "Priority 5",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "select field",
              "id": "1",
              "type": "count"
            }
          ],
          "query": "priority:[[priority]] AND priority:5",
          "refId": "E",
          "timeField": "createTime"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Opened incidents, by priority",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "decimals": 0,
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "decimals": 0,
          "format": "short",
          "label": null,
          "logBase": 1,
          "max": null,
          "min": null,
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    },
    {
      "aliasColors": {},
      "bars": false,
      "dashLength": 10,
      "dashes": false,
      "datasource": "IncidentMetrics",
      "description": "",
      "fieldConfig": {
        "defaults": {
          "custom": {}
        },
        "overrides": []
      },
      "fill": 1,
      "fillGradient": 0,
      "gridPos": {
        "h": 9,
        "w": 12,
        "x": 12,
        "y": 7
      },
      "hiddenSeries": false,
      "hideTimeOverride": true,
      "id": 2,
      "interval": "",
      "legend": {
        "alignAsTable": false,
        "avg": false,
        "current": false,
        "hideEmpty": false,
        "max": false,
        "min": false,
        "rightSide": false,
        "show": true,
        "total": false,
        "values": false
      },
      "lines": true,
      "linewidth": 1,
      "maxDataPoints": 200,
      "nullPointMode": "null",
      "options": {
        "dataLinks": []
      },
      "percentage": false,
      "pointradius": 2,
      "points": false,
      "renderer": "flot",
      "seriesOverrides": [
        {
          "alias": "Mean time to respond",
          "color": "rgb(165, 110, 255)",
          "dashes": true,
          "fill": 0,
          "lines": true,
          "linewidth": 2,
          "nullPointMode": "connected",
          "yaxis": 1
        },
        {
          "alias": "Mean time to resolution",
          "color": "rgb(0, 93, 93)",
          "dashLength": 1,
          "dashes": true,
          "fill": 0,
          "lines": true,
          "linewidth": 2,
          "nullPointMode": "connected",
          "spaceLength": 1,
          "yaxis": 1
        },
        {
          "alias": "Time on hold",
          "color": "rgb(159, 24, 83)",
          "fill": 0,
          "lines": true,
          "linewidth": 2,
          "nullPointMode": "connected",
          "yaxis": 1
        }
      ],
      "spaceLength": 10,
      "stack": false,
      "steppedLine": false,
      "targets": [
        {
          "alias": "Mean time to respond",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeToRespond",
              "id": "1",
              "inlineScript": null,
              "meta": {},
              "settings": {},
              "type": "avg"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "B",
          "timeField": "createTime"
        },
        {
          "alias": "Mean time to resolution",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeToResolve",
              "id": "1",
              "inlineScript": null,
              "meta": {},
              "settings": {},
              "type": "avg"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "C",
          "timeField": "createTime"
        },
        {
          "alias": "Time on hold",
          "bucketAggs": [
            {
              "field": "createTime",
              "id": "2",
              "settings": {
                "interval": "auto",
                "min_doc_count": 0,
                "trimEdges": 0
              },
              "type": "date_histogram"
            }
          ],
          "metrics": [
            {
              "field": "timeOnHold",
              "id": "1",
              "meta": {},
              "settings": {},
              "type": "sum"
            }
          ],
          "query": "priority=[[priority]]",
          "refId": "D",
          "timeField": "createTime"
        }
      ],
      "thresholds": [],
      "timeFrom": null,
      "timeRegions": [],
      "timeShift": null,
      "title": "Incident metrics",
      "tooltip": {
        "shared": true,
        "sort": 0,
        "value_type": "individual"
      },
      "type": "graph",
      "xaxis": {
        "buckets": null,
        "mode": "time",
        "name": null,
        "show": true,
        "values": []
      },
      "yaxes": [
        {
          "format": "ms",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": null,
          "show": true
        },
        {
          "decimals": null,
          "format": "ms",
          "label": "",
          "logBase": 1,
          "max": null,
          "min": "0",
          "show": false
        }
      ],
      "yaxis": {
        "align": false,
        "alignLevel": null
      }
    }
    ],
    "refresh": false,
    "schemaVersion": 25,
    "style": "dark",
    "tags": [],
    "templating": {
    "list": [
      {
        "allValue": null,
        "current": {
          "text": "1 + 2 + 3 + 4 + 5",
          "value": [
            "1",
            "2",
            "3",
            "4",
            "5"
          ]
        },
        "hide": 0,
        "includeAll": false,
        "label": "Priority",
        "multi": true,
        "name": "priority",
        "options": [
          {
            "selected": true,
            "text": "1",
            "value": "1"
          },
          {
            "selected": true,
            "text": "2",
            "value": "2"
          },
          {
            "selected": true,
            "text": "3",
            "value": "3"
          },
          {
            "selected": true,
            "text": "4",
            "value": "4"
          },
          {
            "selected": true,
            "text": "5",
            "value": "5"
          }
        ],
        "query": "1,2,3,4,5",
        "queryValue": "",
        "skipUrlSync": false,
        "type": "custom"
      }
    ]
    },
    "time": {
      "from": "now-7d",
      "to": "now"
    },
    "timepicker": {
    "hidden": false,
    "refresh_intervals": [
      "10s",
      "30s",
      "1m",
      "5m",
      "15m",
      "30m",
      "1h",
      "2h",
      "1d"
    ]
    },
    "timezone": "",
    "title": "Efficiency Dashboard",
    "uid": "BXghS6UWy",
    "version": 67
    }

  rba-statistics.json: |2
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": "-- Grafana --",
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "limit": 100,
            "name": "Annotations",
            "showIn": 0,
            "type": "dashboard"
          }
        ]
      },
      "editable": false,
      "gnetId": null,
      "graphTooltip": 0,
      "id": 4,
      "links": [],
      "panels": [
        {
          "datasource": "rba-statistics",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 12,
            "x": 0,
            "y": 0
          },
          "id": 3,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "auto",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.unique",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "A",
              "timeField": "statisticsTimestamp"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Total runbooks",
          "type": "stat"
        },
        {
          "datasource": "rba-execution-records",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "rgb(0, 0, 0)",
                    "value": null
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 7,
            "x": 12,
            "y": 0
          },
          "id": 12,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "value"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.all",
                  "id": "3",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "refId": "A",
              "timeField": "createdAt"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Runbook executions",
          "type": "stat"
        },
        {
          "datasource": "rba-execution-records",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Automated"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#6929c4",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Manual"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#009d9a",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 5,
            "x": 19,
            "y": 0
          },
          "id": 13,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "alias": "Automated",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.manual",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "triggeredAutomatically:true",
              "refId": "A",
              "timeField": "createdAt"
            },
            {
              "alias": "Manual",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.automated",
                  "id": "4",
                  "meta": {},
                  "pipelineVariables": [
                    {
                      "name": "max",
                      "pipelineAgg": "1"
                    },
                    {
                      "name": "min",
                      "pipelineAgg": "3"
                    }
                  ],
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "triggeredAutomatically:false",
              "refId": "B",
              "timeField": "createdAt"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Executions by style",
          "type": "stat"
        },
        {
          "datasource": "rba-statistics",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Draft"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Published"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 4,
            "x": 0,
            "y": 4
          },
          "id": 2,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "value_and_name"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "alias": "Draft",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.drafts",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "A",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Published",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.published",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "B",
              "timeField": "statisticsTimestamp"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Runbooks by stage",
          "type": "stat"
        },
        {
          "datasource": "rba-statistics",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Manual"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#a56eff",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Semi-automated"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#005d5d",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Fully-automated"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "#002d9c",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 8,
            "x": 4,
            "y": 4
          },
          "id": 9,
          "options": {
            "colorMode": "value",
            "graphMode": "none",
            "justifyMode": "center",
            "orientation": "auto",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "alias": "Manual",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.manual",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "A",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Semi-automated",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.semi",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "B",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Fully-automated",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.automated",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "C",
              "timeField": "statisticsTimestamp"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Runbooks by maturity",
          "type": "stat"
        },
        {
          "datasource": "rba-execution-records",
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "decimals": 0,
              "mappings": [],
              "min": 0,
              "noValue": "0",
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "In progress"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Paused"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Canceled"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Failed"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Successful"
                },
                "properties": [
                  {
                    "id": "thresholds",
                    "value": {
                      "mode": "absolute",
                      "steps": [
                        {
                          "color": "rgb(0, 0, 0)",
                          "value": null
                        }
                      ]
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 4,
            "w": 12,
            "x": 12,
            "y": 4
          },
          "id": 21,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "center",
            "orientation": "vertical",
            "reduceOptions": {
              "calcs": [
                "sum"
              ],
              "fields": "",
              "values": false
            },
            "textMode": "auto"
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "alias": "In progress",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.inProgress",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "status:\"in progress\"",
              "refId": "D",
              "timeField": "createdAt"
            },
            {
              "alias": "Paused",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "hide": true,
              "metrics": [
                {
                  "field": "runbookExecutionRecords.paused",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "status:\"paused\"",
              "refId": "E",
              "timeField": "createdAt"
            },
            {
              "alias": "Canceled",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.canceled",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "status:\"have errors\" OR status:\"wrong runbook\" OR status:\"resolved before end\" OR status:\"not needed\" OR status:\"other\"",
              "refId": "B",
              "timeField": "createdAt"
            },
            {
              "alias": "Failed",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.failed",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "status:\"failure\"",
              "refId": "C",
              "timeField": "createdAt"
            },
            {
              "alias": "Successful",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "5m",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbookExecutionRecords.successful",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "query": "status:\"success\"",
              "refId": "F",
              "timeField": "createdAt"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Executions by status",
          "transformations": [
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "Failed",
                    "In progress",
                    "Successful",
                    "Canceled",
                    "Paused"
                  ]
                }
              }
            }
          ],
          "type": "stat"
        },
        {
          "aliasColors": {},
          "bars": false,
          "dashLength": 10,
          "dashes": false,
          "datasource": "rba-statistics",
          "decimals": 0,
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Manual runbooks"
                },
                "properties": []
              }
            ]
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 0,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 7,
          "interval": "5m",
          "legend": {
            "avg": false,
            "current": false,
            "hideEmpty": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": true,
          "linewidth": 1,
          "nullPointMode": "null as zero",
          "percentage": false,
          "pluginVersion": "7.1.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Manual runbooks",
              "color": "#a56eff"
            },
            {
              "alias": "Semi-automated runbooks",
              "color": "#005d5d"
            },
            {
              "alias": "Fully-automated runbooks",
              "color": "#002d9c"
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "All runbooks",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.unique",
                  "hide": true,
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "A",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Manual runbooks",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.manual",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "B",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Semi-automated runbooks",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.semi",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "C",
              "timeField": "statisticsTimestamp"
            },
            {
              "alias": "Fully-automated runbooks",
              "bucketAggs": [
                {
                  "field": "statisticsTimestamp",
                  "id": "2",
                  "settings": {
                    "interval": "auto",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "runbooks.automated",
                  "id": "1",
                  "meta": {},
                  "settings": {},
                  "type": "avg"
                }
              ],
              "refId": "D",
              "timeField": "statisticsTimestamp"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Runbook maturity over time",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "decimals": null,
              "format": "short",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": null,
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "aliasColors": {},
          "bars": true,
          "dashLength": 10,
          "dashes": false,
          "datasource": "rba-execution-records",
          "decimals": 0,
          "fieldConfig": {
            "defaults": {
              "custom": {},
              "unit": "none"
            },
            "overrides": []
          },
          "fill": 1,
          "fillGradient": 0,
          "gridPos": {
            "h": 9,
            "w": 12,
            "x": 12,
            "y": 8
          },
          "hiddenSeries": false,
          "id": 23,
          "interval": "5m",
          "legend": {
            "avg": false,
            "current": false,
            "hideEmpty": false,
            "hideZero": false,
            "max": false,
            "min": false,
            "show": true,
            "total": false,
            "values": false
          },
          "lines": false,
          "linewidth": 1,
          "maxDataPoints": 20,
          "nullPointMode": "null as zero",
          "percentage": false,
          "pluginVersion": "7.1.1",
          "pointradius": 2,
          "points": false,
          "renderer": "flot",
          "seriesOverrides": [
            {
              "alias": "Automated executions",
              "color": "#6929c4"
            },
            {
              "alias": "Manual executions",
              "color": "#009d9a"
            }
          ],
          "spaceLength": 10,
          "stack": true,
          "steppedLine": false,
          "targets": [
            {
              "alias": "Automated executions",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "1d",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "triggeredAutomatically:true",
              "refId": "A",
              "timeField": "createdAt"
            },
            {
              "alias": "Manual executions",
              "bucketAggs": [
                {
                  "field": "createdAt",
                  "id": "2",
                  "settings": {
                    "interval": "1d",
                    "min_doc_count": 0,
                    "trimEdges": 0
                  },
                  "type": "date_histogram"
                }
              ],
              "metrics": [
                {
                  "field": "select field",
                  "id": "1",
                  "type": "count"
                }
              ],
              "query": "triggeredAutomatically:false",
              "refId": "B",
              "timeField": "createdAt"
            }
          ],
          "thresholds": [],
          "timeFrom": null,
          "timeRegions": [],
          "timeShift": null,
          "title": "Executions per day",
          "tooltip": {
            "shared": true,
            "sort": 0,
            "value_type": "individual"
          },
          "type": "graph",
          "xaxis": {
            "buckets": null,
            "mode": "time",
            "name": null,
            "show": true,
            "values": []
          },
          "yaxes": [
            {
              "decimals": 0,
              "format": "none",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            },
            {
              "format": "none",
              "label": null,
              "logBase": 1,
              "max": null,
              "min": "0",
              "show": true
            }
          ],
          "yaxis": {
            "align": false,
            "alignLevel": null
          }
        },
        {
          "datasource": "rba-execution-records",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "align": null
              },
              "links": [
                {
                  "targetBlank": false,
                  "title": "Open runbook history",
                  "url": "../hdm_rba_legacyui/cfd95b7e-3bc7-4006-a4a8-a73a79c71255/index#/template/runbookHistory?rbid=${__data.fields[\"runbookId.keyword\"]}"
                }
              ],
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "runbookName.keyword"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Runbook name"
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Count"
                },
                "properties": [
                  {
                    "id": "displayName",
                    "value": "Number of runs"
                  },
                  {
                    "id": "custom.width",
                    "value": 200
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "runbookId.keyword"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 278
                  },
                  {
                    "id": "displayName",
                    "value": "Runbook ID"
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 7,
            "w": 24,
            "x": 0,
            "y": 17
          },
          "id": 25,
          "options": {
            "frameIndex": 1,
            "showHeader": true,
            "sortBy": []
          },
          "pluginVersion": "7.1.1",
          "targets": [
            {
              "bucketAggs": [
                {
                  "fake": true,
                  "field": "runbookId.keyword",
                  "id": "6",
                  "settings": {
                    "min_doc_count": 0,
                    "order": "desc",
                    "orderBy": "_count",
                    "size": "30"
                  },
                  "type": "terms"
                },
                {
                  "fake": true,
                  "field": "runbookName.keyword",
                  "id": "5",
                  "settings": {
                    "min_doc_count": 0,
                    "order": "desc",
                    "orderBy": "_count",
                    "size": "1"
                  },
                  "type": "terms"
                }
              ],
              "hide": false,
              "metrics": [
                {
                  "field": "select field",
                  "id": "4",
                  "meta": {},
                  "settings": {},
                  "type": "count"
                }
              ],
              "refId": "B",
              "timeField": "createdAt"
            }
          ],
          "timeFrom": null,
          "timeShift": null,
          "title": "Most frequently executed runbooks",
          "transformations": [
            {
              "id": "organize",
              "options": {
                "indexByName": {
                  "Count": 0,
                  "runbookName.keyword": 1,
                  "runbookId.keyword": 2
                }
              }
            }
          ],
          "type": "table"
        }
      ],
      "refresh": false,
      "schemaVersion": 26,
      "style": "dark",
      "tags": [],
      "templating": {
        "list": []
      },
      "time": {
        "from": "now-30d",
        "to": "now"
      },
      "timepicker": {
        "hidden": false,
        "nowDelay": "",
        "refresh_intervals": [
          "10s",
          "30s",
          "1m",
          "5m",
          "15m",
          "30m",
          "1h",
          "2h",
          "1d"
        ]
      },
      "timezone": "",
      "title": "Runbook statistics",
      "uid": "rNU_XZIGz",
      "version": 11
    }

  grafana.ini: |2
    ##################### Grafana Configuration Example #####################
    #
    # Everything has defaults so you only need to uncomment things you want to
    # change

    # possible values : production, development
    ;app_mode = production

    # instance name, defaults to HOSTNAME environment variable value or hostname if HOSTNAME var is empty
    ;instance_name = ${HOSTNAME}

    #################################### Paths ####################################
    [paths]
    # Path to where grafana can store temp files, sessions, and the sqlite3 db (if that is used)
    ;data = /var/lib/grafana

    # Temporary files in `data` directory older than given duration will be removed
    ;temp_data_lifetime = 24h

    # Directory where grafana can store logs
    ;logs = /var/log/grafana

    # Directory where grafana will automatically scan and look for plugins
    ;plugins = /var/lib/grafana/plugins

    # folder that contains provisioning config files that grafana will apply on startup and while running.
    ;provisioning = conf/provisioning

    #################################### Server ####################################
    [server]
    # Protocol (http, https, h2, socket)
    ;protocol = http

    # The ip address to bind to, empty will bind to all interfaces
    ;http_addr =

    # The http port  to use
    ;http_port = 3000

    # The public facing domain name used to access grafana from a browser
    ;domain = localhost

    # Redirect to correct domain if host header does not match domain
    # Prevents DNS rebinding attacks
    ;enforce_domain = false

    # The full public facing url you use in browser, used for redirects and emails
    # If you use reverse proxy and sub path specify full url (with sub path)
    root_url = %(protocol)s://%(domain)s:%(http_port)s/api/p/hdm_noi_dashboarding

    # Serve Grafana from subpath specified in `root_url` setting. By default it is set to `false` for compatibility reasons.
    serve_from_sub_path = true

    # Log web requests
    ;router_logging = false

    # the path relative working path
    ;static_root_path = public

    # enable gzip
    ;enable_gzip = false

    # https certs & key file
    ;cert_file =
    ;cert_key =

    # Unix socket path
    ;socket =

    #################################### Database ####################################
    [database]
    # You can configure the database connection by specifying type, host, name, user and password
    # as separate properties or as on string using the url properties.

    # Either "mysql", "postgres" or "sqlite3", it's your choice
    ;type = sqlite3
    ;host = 127.0.0.1:3306
    ;name = grafana
    ;user = root
    # If the password contains # or ; you have to wrap it with triple quotes. Ex """#password;"""
    ;password =

    # Use either URL or the previous fields to configure the database
    # Example: mysql://user:secret@host:port/database
    ;url =

    # For "postgres" only, either "disable", "require" or "verify-full"
    ;ssl_mode = disable

    ;ca_cert_path =
    ;client_key_path =
    ;client_cert_path =
    ;server_cert_name =

    # For "sqlite3" only, path relative to data_path setting
    ;path = grafana.db

    # Max idle conn setting default is 2
    ;max_idle_conn = 2

    # Max conn setting default is 0 (mean not set)
    ;max_open_conn =

    # Connection Max Lifetime default is 14400 (means 14400 seconds or 4 hours)
    ;conn_max_lifetime = 14400

    # Set to true to log the sql calls and execution times.
    ;log_queries =

    # For "sqlite3" only. cache mode setting used for connecting to the database. (private, shared)
    ;cache_mode = private

    #################################### Cache server #############################
    [remote_cache]
    # Either "redis", "memcached" or "database" default is "database"
    ;type = database

    # cache connectionstring options
    # database: will use Grafana primary database.
    # redis: config like redis server e.g. `addr=127.0.0.1:6379,pool_size=100,db=0,ssl=false`. Only addr is required. ssl may be 'true', 'false', or 'insecure'.
    # memcache: 127.0.0.1:11211
    ;connstr =

    #################################### Data proxy ###########################
    [dataproxy]

    # This enables data proxy logging, default is false
    ;logging = false

    # How long the data proxy should wait before timing out default is 30 (seconds)
    ;timeout = 30

    # If enabled and user is not anonymous, data proxy will add X-Grafana-User header with username into the request, default is false.
    ;send_user_header = false

    #################################### Analytics ####################################
    [analytics]
    # Server reporting, sends usage counters to stats.grafana.org every 24 hours.
    # No ip addresses are being tracked, only simple counters to track
    # running instances, dashboard and error counts. It is very helpful to us.
    # Change this option to false to disable reporting.
    ;reporting_enabled = true

    # Set to false to disable all checks to https://grafana.net
    # for new vesions (grafana itself and plugins), check is used
    # in some UI views to notify that grafana or plugin update exists
    # This option does not cause any auto updates, nor send any information
    # only a GET request to http://grafana.com to get latest versions
    ;check_for_updates = true

    # Google Analytics universal tracking code, only enabled if you specify an id here
    ;google_analytics_ua_id =

    # Google Tag Manager ID, only enabled if you specify an id here
    ;google_tag_manager_id =

    #################################### Security ####################################
    [security]
    # disable creation of admin user on first start of grafana
    ;disable_initial_admin_creation = false

    # default admin user, created on startup
    ;admin_user = admin

    # default admin password, can be changed before first start of grafana,  or in profile settings
    ;admin_password = admin

    # used for signing
    ;secret_key = SW2YcwTIb9zpOOhoPsMm

    # disable gravatar profile images
    ;disable_gravatar = false

    # data source proxy whitelist (ip_or_domain:port separated by spaces)
    ;data_source_proxy_whitelist =

    # disable protection against brute force login attempts
    ;disable_brute_force_login_protection = false

    # set to true if you host Grafana behind HTTPS. default is false.
    ;cookie_secure = false

    # set cookie SameSite attribute. defaults to `lax`. can be set to "lax", "strict", "none" and "disabled"
    ;cookie_samesite = lax

    # set to true if you want to allow browsers to render Grafana in a <frame>, <iframe>, <embed> or <object>. default is false.
    allow_embedding = true

    # Set to true if you want to enable http strict transport security (HSTS) response header.
    # This is only sent when HTTPS is enabled in this configuration.
    # HSTS tells browsers that the site should only be accessed using HTTPS.
    # The default version will change to true in the next minor release, 6.3.
    ;strict_transport_security = false

    # Sets how long a browser should cache HSTS. Only applied if strict_transport_security is enabled.
    ;strict_transport_security_max_age_seconds = 86400

    # Set to true if to enable HSTS preloading option. Only applied if strict_transport_security is enabled.
    ;strict_transport_security_preload = false

    # Set to true if to enable the HSTS includeSubDomains option. Only applied if strict_transport_security is enabled.
    ;strict_transport_security_subdomains = false

    # Set to true to enable the X-Content-Type-Options response header.
    # The X-Content-Type-Options response HTTP header is a marker used by the server to indicate that the MIME types advertised
    # in the Content-Type headers should not be changed and be followed. The default will change to true in the next minor release, 6.3.
    ;x_content_type_options = false

    # Set to true to enable the X-XSS-Protection header, which tells browsers to stop pages from loading
    # when they detect reflected cross-site scripting (XSS) attacks. The default will change to true in the next minor release, 6.3.
    ;x_xss_protection = false

    #################################### Snapshots ###########################
    [snapshots]
    # snapshot sharing options
    ;external_enabled = true
    ;external_snapshot_url = https://snapshots-origin.raintank.io
    ;external_snapshot_name = Publish to snapshot.raintank.io

    # Set to true to enable this Grafana instance act as an external snapshot server and allow unauthenticated requests for
    # creating and deleting snapshots.
    ;public_mode = false

    # remove expired snapshot
    ;snapshot_remove_expired = true

    #################################### Dashboards History ##################
    [dashboards]
    # Number dashboard versions to keep (per dashboard). Default: 20, Minimum: 1
    ;versions_to_keep = 20

    # Minimum dashboard refresh interval. When set, this will restrict users to set the refresh interval of a dashboard lower than given interval. Per default this is 5 seconds.
    # The interval string is a possibly signed sequence of decimal numbers, followed by a unit suffix (ms, s, m, h, d), e.g. 30s or 1m.
    ;min_refresh_interval = 5s

    #################################### Users ###############################
    [users]
    # disable user signup / registration
    ;allow_sign_up = true

    # Allow non admin users to create organizations
    ;allow_org_create = true

    # Set to true to automatically assign new users to the default organization (id 1)
    ;auto_assign_org = true

    # Set this value to automatically add new users to the provided organization (if auto_assign_org above is set to true)
    ;auto_assign_org_id = 1

    # Default role new users will be automatically assigned (if disabled above is set to true)
    ;auto_assign_org_role = Viewer

    # Require email validation before sign up completes
    ;verify_email_enabled = false

    # Background text for the user field on the login page
    ;login_hint = email or username
    ;password_hint = password

    # Default UI theme ("dark" or "light")
    default_theme = light

    # External user management, these options affect the organization users view
    ;external_manage_link_url =
    ;external_manage_link_name =
    ;external_manage_info =

    # Viewers can edit/inspect dashboard settings in the browser. But not save the dashboard.
    ;viewers_can_edit = false

    # Editors can administrate dashboard, folders and teams they create
    ;editors_can_admin = false

    [auth]
    # Login cookie name
    ;login_cookie_name = grafana_session

    # The lifetime (days) an authenticated user can be inactive before being required to login at next visit. Default is 7 days,
    ;login_maximum_inactive_lifetime_days = 7

    # The maximum lifetime (days) an authenticated user can be logged in since login time before being required to login. Default is 30 days.
    ;login_maximum_lifetime_days = 30

    # How often should auth tokens be rotated for authenticated users when being active. The default is each 10 minutes.
    ;token_rotation_interval_minutes = 10

    # Set to true to disable (hide) the login form, useful if you use OAuth, defaults to false
    ;disable_login_form = false

    # Set to true to disable the signout link in the side menu. useful if you use auth.proxy, defaults to false
    ;disable_signout_menu = false

    # URL to redirect the user to after sign out
    ;signout_redirect_url =

    # Set to true to attempt login with OAuth automatically, skipping the login screen.
    # This setting is ignored if multiple OAuth providers are configured.
    ;oauth_auto_login = false

    # OAuth state max age cookie duration. Defaults to 60 seconds.
    ;oauth_state_cookie_max_age = 60

    # limit of api_key seconds to live before expiration
    ;api_key_max_seconds_to_live = -1

    #################################### Anonymous Auth ######################
    [auth.anonymous]
    # enable anonymous access
    enabled = true

    # specify organization name that should be used for unauthenticated users
    org_name = Main Org.

    # specify role for unauthenticated users
    org_role = Viewer

    #################################### Github Auth ##########################
    [auth.github]
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_id
    ;client_secret = some_secret
    ;scopes = user:email,read:org
    ;auth_url = https://github.com/login/oauth/authorize
    ;token_url = https://github.com/login/oauth/access_token
    ;api_url = https://api.github.com/user
    ;allowed_domains =
    ;team_ids =
    ;allowed_organizations =

    #################################### GitLab Auth #########################
    [auth.gitlab]
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_id
    ;client_secret = some_secret
    ;scopes = api
    ;auth_url = https://gitlab.com/oauth/authorize
    ;token_url = https://gitlab.com/oauth/token
    ;api_url = https://gitlab.com/api/v4
    ;allowed_domains =
    ;allowed_groups =

    #################################### Google Auth ##########################
    [auth.google]
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_client_id
    ;client_secret = some_client_secret
    ;scopes = https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
    ;auth_url = https://accounts.google.com/o/oauth2/auth
    ;token_url = https://accounts.google.com/o/oauth2/token
    ;api_url = https://www.googleapis.com/oauth2/v1/userinfo
    ;allowed_domains =
    ;hosted_domain =

    #################################### Grafana.com Auth ####################
    [auth.grafana_com]
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_id
    ;client_secret = some_secret
    ;scopes = user:email
    ;allowed_organizations =

    #################################### Azure AD OAuth #######################
    [auth.azuread]
    ;name = Azure AD
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_client_id
    ;client_secret = some_client_secret
    ;scopes = openid email profile
    ;auth_url = https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/authorize
    ;token_url = https://login.microsoftonline.com/<tenant-id>/oauth2/v2.0/token
    ;allowed_domains =
    ;allowed_groups =

    #################################### Okta OAuth #######################
    [auth.okta]
    ;name = Okta
    ;enabled = false
    ;allow_sign_up = true
    ;client_id = some_id
    ;client_secret = some_secret
    ;scopes = openid profile email groups
    ;auth_url = https://<tenant-id>.okta.com/oauth2/v1/authorize
    ;token_url = https://<tenant-id>.okta.com/oauth2/v1/token
    ;api_url = https://<tenant-id>.okta.com/oauth2/v1/userinfo
    ;allowed_domains =
    ;allowed_groups =
    ;role_attribute_path =

    #################################### Generic OAuth ##########################
    [auth.generic_oauth]
    ;enabled = false
    ;name = OAuth
    ;allow_sign_up = true
    ;client_id = some_id
    ;client_secret = some_secret
    ;scopes = user:email,read:org
    ;email_attribute_name = email:primary
    ;email_attribute_path =
    ;auth_url = https://foo.bar/login/oauth/authorize
    ;token_url = https://foo.bar/login/oauth/access_token
    ;api_url = https://foo.bar/user
    ;allowed_domains =
    ;team_ids =
    ;allowed_organizations =
    ;role_attribute_path =
    ;tls_skip_verify_insecure = false
    ;tls_client_cert =
    ;tls_client_key =
    ;tls_client_ca =

    #################################### Basic Auth ##########################
    [auth.basic]
    ;enabled = true

    #################################### Auth Proxy ##########################
    [auth.proxy]
    ;enabled = false
    ;header_name = X-WEBAUTH-USER
    ;header_property = username
    ;auto_sign_up = true
    ;sync_ttl = 60
    ;whitelist = 192.168.1.1, 192.168.2.1
    ;headers = Email:X-User-Email, Name:X-User-Name
    # Read the auth proxy docs for details on what the setting below enables
    ;enable_login_token = false

    #################################### Auth LDAP ##########################
    [auth.ldap]
    ;enabled = false
    ;config_file = /etc/grafana/ldap.toml
    ;allow_sign_up = true

    # LDAP backround sync (Enterprise only)
    # At 1 am every day
    ;sync_cron = "0 0 1 * * *"
    ;active_sync_enabled = true

    #################################### SMTP / Emailing ##########################
    [smtp]
    ;enabled = false
    ;host = localhost:25
    ;user =
    # If the password contains # or ; you have to wrap it with triple quotes. Ex """#password;"""
    ;password =
    ;cert_file =
    ;key_file =
    ;skip_verify = false
    ;from_address = admin@grafana.localhost
    ;from_name = Grafana
    # EHLO identity in SMTP dialog (defaults to instance_name)
    ;ehlo_identity = dashboard.example.com

    [emails]
    ;welcome_email_on_sign_up = false
    ;templates_pattern = emails/*.html

    #################################### Logging ##########################
    [log]
    # Either "console", "file", "syslog". Default is console and  file
    # Use space to separate multiple modes, e.g. "console file"
    ;mode = console file

    # Either "debug", "info", "warn", "error", "critical", default is "info"
    ;level = info

    # optional settings to set different levels for specific loggers. Ex filters = sqlstore:debug
    ;filters =

    # For "console" mode only
    [log.console]
    ;level =

    # log line format, valid options are text, console and json
    ;format = console

    # For "file" mode only
    [log.file]
    ;level =

    # log line format, valid options are text, console and json
    ;format = text

    # This enables automated log rotate(switch of following options), default is true
    ;log_rotate = true

    # Max line number of single file, default is 1000000
    ;max_lines = 1000000

    # Max size shift of single file, default is 28 means 1 << 28, 256MB
    ;max_size_shift = 28

    # Segment log daily, default is true
    ;daily_rotate = true

    # Expired days of log file(delete after max days), default is 7
    ;max_days = 7

    [log.syslog]
    ;level =

    # log line format, valid options are text, console and json
    ;format = text

    # Syslog network type and address. This can be udp, tcp, or unix. If left blank, the default unix endpoints will be used.
    ;network =
    ;address =

    # Syslog facility. user, daemon and local0 through local7 are valid.
    ;facility =

    # Syslog tag. By default, the process' argv[0] is used.
    ;tag =

    #################################### Usage Quotas ########################
    [quota]
    ; enabled = false

    #### set quotas to -1 to make unlimited. ####
    # limit number of users per Org.
    ; org_user = 10

    # limit number of dashboards per Org.
    ; org_dashboard = 100

    # limit number of data_sources per Org.
    ; org_data_source = 10

    # limit number of api_keys per Org.
    ; org_api_key = 10

    # limit number of orgs a user can create.
    ; user_org = 10

    # Global limit of users.
    ; global_user = -1

    # global limit of orgs.
    ; global_org = -1

    # global limit of dashboards
    ; global_dashboard = -1

    # global limit of api_keys
    ; global_api_key = -1

    # global limit on number of logged in users.
    ; global_session = -1

    #################################### Alerting ############################
    [alerting]
    # Disable alerting engine & UI features
    ;enabled = true
    # Makes it possible to turn off alert rule execution but alerting UI is visible
    ;execute_alerts = true

    # Default setting for new alert rules. Defaults to categorize error and timeouts as alerting. (alerting, keep_state)
    ;error_or_timeout = alerting

    # Default setting for how Grafana handles nodata or null values in alerting. (alerting, no_data, keep_state, ok)
    ;nodata_or_nullvalues = no_data

    # Alert notifications can include images, but rendering many images at the same time can overload the server
    # This limit will protect the server from render overloading and make sure notifications are sent out quickly
    ;concurrent_render_limit = 5


    # Default setting for alert calculation timeout. Default value is 30
    ;evaluation_timeout_seconds = 30

    # Default setting for alert notification timeout. Default value is 30
    ;notification_timeout_seconds = 30

    # Default setting for max attempts to sending alert notifications. Default value is 3
    ;max_attempts = 3

    # Makes it possible to enforce a minimal interval between evaluations, to reduce load on the backend
    ;min_interval_seconds = 1

    #################################### Explore #############################
    [explore]
    # Enable the Explore section
    ;enabled = true

    #################################### Internal Grafana Metrics ##########################
    # Metrics available at HTTP API Url /metrics
    [metrics]
    # Disable / Enable internal metrics
    ;enabled           = true
    # Graphite Publish interval
    ;interval_seconds  = 10
    # Disable total stats (stat_totals_*) metrics to be generated
    ;disable_total_stats = false

    #If both are set, basic auth will be required for the metrics endpoint.
    ; basic_auth_username =
    ; basic_auth_password =

    # Send internal metrics to Graphite
    [metrics.graphite]
    # Enable by setting the address setting (ex localhost:2003)
    ;address =
    ;prefix = prod.grafana.%(instance_name)s.

    #################################### Grafana.com integration  ##########################
    # Url used to import dashboards directly from Grafana.com
    [grafana_com]
    ;url = https://grafana.com

    #################################### Distributed tracing ############
    [tracing.jaeger]
    # Enable by setting the address sending traces to jaeger (ex localhost:6831)
    ;address = localhost:6831
    # Tag that will always be included in when creating new spans. ex (tag1:value1,tag2:value2)
    ;always_included_tag = tag1:value1
    # Type specifies the type of the sampler: const, probabilistic, rateLimiting, or remote
    ;sampler_type = const
    # jaeger samplerconfig param
    # for "const" sampler, 0 or 1 for always false/true respectively
    # for "probabilistic" sampler, a probability between 0 and 1
    # for "rateLimiting" sampler, the number of spans per second
    # for "remote" sampler, param is the same as for "probabilistic"
    # and indicates the initial sampling rate before the actual one
    # is received from the mothership
    ;sampler_param = 1
    # Whether or not to use Zipkin propagation (x-b3- HTTP headers).
    ;zipkin_propagation = false
    # Setting this to true disables shared RPC spans.
    # Not disabling is the most common setting when using Zipkin elsewhere in your infrastructure.
    ;disable_shared_zipkin_spans = false

    #################################### External image storage ##########################
    [external_image_storage]
    # Used for uploading images to public servers so they can be included in slack/email messages.
    # you can choose between (s3, webdav, gcs, azure_blob, local)
    ;provider =

    [external_image_storage.s3]
    ;endpoint =
    ;path_style_access =
    ;bucket =
    ;region =
    ;path =
    ;access_key =
    ;secret_key =

    [external_image_storage.webdav]
    ;url =
    ;public_url =
    ;username =
    ;password =

    [external_image_storage.gcs]
    ;key_file =
    ;bucket =
    ;path =

    [external_image_storage.azure_blob]
    ;account_name =
    ;account_key =
    ;container_name =

    [external_image_storage.local]
    # does not require any configuration

    [rendering]
    # Options to configure a remote HTTP image rendering service, e.g. using https://github.com/grafana/grafana-image-renderer.
    # URL to a remote HTTP image renderer service, e.g. http://localhost:8081/render, will enable Grafana to render panels and dashboards to PNG-images using HTTP requests to an external service.
    ;server_url =
    # If the remote HTTP image renderer service runs on a different server than the Grafana server you may have to configure this to a URL where Grafana is reachable, e.g. http://grafana.domain/.
    ;callback_url =
    # Concurrent render request limit affects when the /render HTTP endpoint is used. Rendering many images at the same time can overload the server,
    # which this setting can help protect against by only allowing a certain amount of concurrent requests.
    ;concurrent_render_request_limit = 30

    [panels]
    # If set to true Grafana will allow script tags in text panels. Not recommended as it enable XSS vulnerabilities.
    ;disable_sanitize_html = false

    [plugins]
    ;enable_alpha = false
    ;app_tls_skip_verify_insecure = false
    # Enter a comma-separated list of plugin identifiers to identify plugins that are allowed to be loaded even if they lack a valid signature.
    ;allow_loading_unsigned_plugins =

    #################################### Grafana Image Renderer Plugin ##########################
    [plugin.grafana-image-renderer]
    # Instruct headless browser instance to use a default timezone when not provided by Grafana, e.g. when rendering panel image of alert.
    # See ICUs metaZones.txt (https://cs.chromium.org/chromium/src/third_party/icu/source/data/misc/metaZones.txt) for a list of supported
    # timezone IDs. Fallbacks to TZ environment variable if not set.
    ;rendering_timezone =

    # Instruct headless browser instance to use a default language when not provided by Grafana, e.g. when rendering panel image of alert.
    # Please refer to the HTTP header Accept-Language to understand how to format this value, e.g. 'fr-CH, fr;q=0.9, en;q=0.8, de;q=0.7, *;q=0.5'.
    ;rendering_language =

    # Instruct headless browser instance to use a default device scale factor when not provided by Grafana, e.g. when rendering panel image of alert.
    # Default is 1. Using a higher value will produce more detailed images (higher DPI), but will require more disk space to store an image.
    ;rendering_viewport_device_scale_factor =

    # Instruct headless browser instance whether to ignore HTTPS errors during navigation. Per default HTTPS errors are not ignored. Due to
    # the security risk it's not recommended to ignore HTTPS errors.
    ;rendering_ignore_https_errors =

    # Instruct headless browser instance whether to capture and log verbose information when rendering an image. Default is false and will
    # only capture and log error messages. When enabled, debug messages are captured and logged as well.
    # For the verbose information to be included in the Grafana server log you have to adjust the rendering log level to debug, configure
    # [log].filter = rendering:debug.
    ;rendering_verbose_logging =

    # Instruct headless browser instance whether to output its debug and error messages into running process of remote rendering service.
    # Default is false. This can be useful to enable (true) when troubleshooting.
    ;rendering_dumpio =

    # Additional arguments to pass to the headless browser instance. Default is --no-sandbox. The list of Chromium flags can be found
    # here (https://peter.sh/experiments/chromium-command-line-switches/). Multiple arguments is separated with comma-character.
    ;rendering_args =

    # You can configure the plugin to use a different browser binary instead of the pre-packaged version of Chromium.
    # Please note that this is not recommended, since you may encounter problems if the installed version of Chrome/Chromium is not
    # compatible with the plugin.
    ;rendering_chrome_bin =

    # Instruct how headless browser instances are created. Default is 'default' and will create a new browser instance on each request.
    # Mode 'clustered' will make sure that only a maximum of browsers/incognito pages can execute concurrently.
    # Mode 'reusable' will have one browser instance and will create a new incognito page on each request.
    ;rendering_mode =

    # When rendering_mode = clustered you can instruct how many browsers or incognito pages can execute concurrently. Default is 'browser'
    # and will cluster using browser instances.
    # Mode 'context' will cluster using incognito pages.
    ;rendering_clustering_mode =
    # When rendering_mode = clustered you can define maximum number of browser instances/incognito pages that can execute concurrently..
    ;rendering_clustering_max_concurrency =

    # Limit the maxiumum viewport width, height and device scale factor that can be requested.
    ;rendering_viewport_max_width =
    ;rendering_viewport_max_height =
    ;rendering_viewport_max_device_scale_factor =

    # Change the listening host and port of the gRPC server. Default host is 127.0.0.1 and default port is 0 and will automatically assign
    # a port not in use.
    ;grpc_host =
    ;grpc_port =

    [enterprise]
    # Path to a valid Grafana Enterprise license.jwt file
    ;license_path =

    [feature_toggles]
    # enable features, separated by spaces
    ;enable =
