apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "ibm-apiconnect-pro.fullname" . }}-extra-values
  annotations:
    productName: {{ template "ibm-apiconnect-pro.productName" . }}
    productID: {{ template "ibm-apiconnect-pro.productID" . }}
    productVersion: {{ template "ibm-apiconnect-pro.productVersion" . }}
    productMetric: {{ template "ibm-apiconnect-pro.productMetric" . }}
    productChargedContainers: ""
  labels:
    app: {{ template "ibm-apiconnect-pro.name" . }}
    chart: {{ .Chart.Name }}-{{ .Chart.Version | replace "+" "_" }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
data:
  management: |-
    global:
      productName: {{ template "ibm-apiconnect-pro.productName" . }}
      productID: {{ template "ibm-apiconnect-pro.productID" . }}
      productVersion: {{ template "ibm-apiconnect-pro.productVersion" . }}
      productMetric: {{ template "ibm-apiconnect-pro.productMetric" . }}
      productChargedContainers: {{ template "ibm-apiconnect-pro.productChargedContainers" . }}
    podLabels:
      parentRelease: {{ .Release.Name }}
    serviceLabels:
      parentRelease: {{ .Release.Name }}
    analytics-proxy:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      apimWaiter:
        securityContext:
          privileged: false
          readOnlyRootFilesystem: false
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    apim:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    client-downloads-server:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    juhu:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    ldap:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    lur:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    ui:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
  analytics: |-
    global:
      productName: {{ template "ibm-apiconnect-pro.productName" . }}
      productID: {{ template "ibm-apiconnect-pro.productID" . }}
      productVersion: {{ template "ibm-apiconnect-pro.productVersion" . }}
      productMetric: {{ template "ibm-apiconnect-pro.productMetric" . }}
      productChargedContainers: {{ template "ibm-apiconnect-pro.productChargedContainers" . }}
    podLabels:
      parentRelease: {{ .Release.Name }}
    serviceLabels:
      parentRelease: {{ .Release.Name }}
    hostSettings:
      hostNetwork: false
      hostPID: false
      hostIPC: false
    hostSettings:
      hostNetwork: false
      hostPID: false
      hostIPC: false
    securityContext:
      privileged: false
      readOnlyRootFilesystem: false
      allowPrivilegeEscalation: false
      capabilities:
        drop:
        - ALL
    apic-analytics-client:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    apic-analytics-ingestion:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      kafkaWaiter:
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          readOnlyRootFilesystem: false
    apic-analytics-message-queue:
      apic-analytics-mq-kafka:
        podLabels:
          parentRelease: {{ .Release.Name }}
        serviceLabels:
          parentRelease: {{ .Release.Name }}
        hostSettings:
          hostNetwork: false
          hostPID: false
          hostIPC: false
        securityContext:
          privileged: false
          readOnlyRootFilesystem: false
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
        zkWaiter:
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            readOnlyRootFilesystem: false
      apic-analytics-mq-zookeeper:
        podLabels:
          parentRelease: {{ .Release.Name }}
        serviceLabels:
          parentRelease: {{ .Release.Name }}
        hostSettings:
          hostNetwork: false
          hostPID: false
          hostIPC: false
        securityContext:
          privileged: false
          readOnlyRootFilesystem: false
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
    apic-analytics-operator:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
    apic-analytics-storage:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      securityContext:
        privileged: false
        readOnlyRootFilesystem: false
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      apic-analytics-cronjobs:
        podLabels:
          parentRelease: {{ .Release.Name }}
        serviceLabels:
          parentRelease: {{ .Release.Name }}
        hostSettings:
          hostNetwork: false
          hostPID: false
          hostIPC: false
        securityContext:
          privileged: false
          readOnlyRootFilesystem: false
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
      storageWaiter:
        hostSettings:
          hostNetwork: false
          hostPID: false
          hostIPC: false
        securityContext:
          privileged: false
          readOnlyRootFilesystem: false
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
  portal: |-
    global:
      productName: {{ template "ibm-apiconnect-pro.productName" . }}
      productID: {{ template "ibm-apiconnect-pro.productID" . }}
      productVersion: {{ template "ibm-apiconnect-pro.productVersion" . }}
      productMetric: {{ template "ibm-apiconnect-pro.productMetric" . }}
      productChargedContainers: {{ template "ibm-apiconnect-pro.productChargedContainers" . }}
    podLabels:
      parentRelease: {{ .Release.Name }}
    serviceLabels:
      parentRelease: {{ .Release.Name }}
    apic-portal-db:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
    apic-portal-www:
      podLabels:
        parentRelease: {{ .Release.Name }}
      serviceLabels:
        parentRelease: {{ .Release.Name }}
      hostSettings:
        hostNetwork: false
        hostPID: false
        hostIPC: false
      nginx:
        hostSettings:
          hostNetwork: false
          hostPID: false
          hostIPC: false