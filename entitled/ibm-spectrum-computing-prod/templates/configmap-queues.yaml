{{- include "sch.config.init" (list . "ibm-spectrum-computing.sch.chart.config.values") -}}
{{- $fullName := include "sch.names.fullName" (list .) -}}

apiVersion: v1
kind: ConfigMap
metadata:
  name: "{{ $fullName }}-queues"
  labels:
{{ include "sch.metadata.labels.standard" (list . "") | indent 4 }}
data:
  lsb.queues: |-
    # Do not edit this file directly.  Use the following to edit:
    #     $ kubectl edit configmap {Something}-ibm-spectrum-computing-prod-queues
    # Changes to the file will be automatically applied to the cluster
    Begin Queue
    QUEUE_NAME   = normal
    PRIORITY     = 30
    DESCRIPTION  = For normal low priority pods
    End Queue

    Begin Queue
    QUEUE_NAME   = idle
    PRIORITY     = 20
    r15s         = 0.3/1.5
    r1m          = 0.3/1.5
    pg           = 4.0/15
    DESCRIPTION  = Running only if the machine is idle and very lightly loaded.
    End Queue

    Begin Queue
    QUEUE_NAME   = priority
    PRIORITY     = 43
    PREEMPTION   = PREEMPTIVE[idle]
    FAIRSHARE    = USER_SHARES[[gold,9] [silver,3] [bronze,1]]
    DESCRIPTION  =  For high priority pods
    QUEUE_GROUP  = normal idle
    End Queue
    
    Begin Queue
    QUEUE_NAME   = night
    PRIORITY     = 15
    RUN_WINDOW   = 5:19:00-1:8:30 20:00-8:30
    r1m          = 0.8/2.5
    FAIRSHARE    = USER_SHARES[[gold,10] [silver,4] [bronze,1]]
    DESCRIPTION  = For large heavy duty pods, running during off hours
    End Queue
