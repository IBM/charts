###############################################################################
# Licensed Materials - Property of IBM.
# Copyright IBM Corporation 2019. All Rights Reserved.
# U.S. Government Users Restricted Rights - Use, duplication or disclosure
# restricted by GSA ADP Schedule Contract with IBM Corp.
#
# Contributors:
#  IBM Corporation - initial API and implementation
###############################################################################

manager:
  __metadata:
    label: "Spectrum Computing Manager configuration"
    description: "Configure the Spectrum Computing manager to run as a container"
  image:
    __metadata:
      label: "Manager Image"
      description: "Docker registry to pull lsf-master image from."
  tag:
    __metadata:
      label: "Manager Image Tag"
      description: "A tag is a label applied to a image in a repository. Tags are how various images in a repository are distinguished from each other."
  imagePullPolicy:
    __metadata:
      label: "Manager image pull policy"
      description: "The default pull policy is Always which causes the Kubelet to pull an image even if it already exists."
      type: "string"
      required: true
      options:
      - label: "Never"
        value: "Never"
      - label: "IfNotPresent"
        value: "IfNotPresent"
      - label: "Always"
        value: "Always"
  cpu:
    __metadata:
      label: "Manager CPU Resources"
      description: "The minimum required CPU core. Specify integers, fractions (e.g. 0.5), or millicore values(e.g. 100m, where 100m is equivalent to .1 core)."
  memory:
    __metadata:
      label: "Manager Memory Resources"
      description: "The minimum memory in bytes. Specify integers with one of these suffixes: E, P, T, G, M, K, or power-of-two equivalents: Ei, Pi, Ti, Gi, Mi, Ki."

compute:
  __metadata:
    label: "Spectrum Computing Agent Configuration"
    description: "Use these parameters to customize the Spectrum Computing Agent image"
  image:
    __metadata:
      label: "Agent Image"
      description: "Docker registry to pull lsf-comp image from."
  tag:
    __metadata:
      label: "Agent Image Tag"
      description: "A tag is a label applied to a image in a repository. Tags are how various images in a repository are distinguished from each other."
  imagePullPolicy:
    __metadata:
      label: "Agent image pull policy"
      description: "The default pull policy is Always which causes the Kubelet to pull an image even if it already exists."
      type: "string"
      required: true
      options:
      - label: "Never"
        value: "Never"
      - label: "IfNotPresent"
        value: "IfNotPresent"
      - label: "Always"
        value: "Always"
  excludeHostLabel:
    __metadata:
      label: "Exclude Worker nodes label name"
      description: "Enter the label that was assigned to nodes that should not be part of the cluster."
      type: "string"
      required: false

pvc:
  __metadata:
    label: "Storage Configuration"
    description: "Provide the configuration values for the storage"

  size:
    __metadata:
      label: "Size of shared storage"
      description: "Size of shared storage for deployment - optional field dependent on workload"
      type: "string"
  useDynamicProvisioning:
    __metadata:
      label: "Use dynamic provisioning"
      description: "Select this checkbox to allow the cluster to automatically provision new storage resource and create PersistentVolume objects."
      type: "boolean"
  storageClassName:
    __metadata:
      label: "Name of storage class"
      description: "Name of the storage class for dynamic provisioning"
      type: "string"
  existingClaimName:
    __metadata:
      label: "Name of existing claim name"
      description: "Name of an existing persistent volume claim if not using dynamic provisioning"
      type: "string"
  selector:
    label:
      __metadata:
        label: "Claim selector label"
        description: "When matching a pre-existing persistent volume, the label used to find a match on the keySelector label"
        type: "string"
    value:
      __metadata:
        label: "Claim selector value"
        description: "When matching a pre-existing persistent volume, the label used to find a match on the values"
        type: "string"
  fsGroup:
    __metadata:
      label: "The fsGroup for the PVC"
      description: "When using NFS this should match the group owner of the NFS share"
  supplementalGroups:
    __metadata:
      label: "The supplementalGroups for the PVC"
      description: "This is any additional groups needed when accessing the PVC"

gpu:
  __metadata:
    label: "GPU Runtime Configuration"
    description: "When NOT using Nvidia docker runtime set this value"
  nvidiapath:
    __metadata:
      label: "The location of the kubelets nvidia-driver"
      description: "Typically /var/lib/kubelet/device-plugins/nvidia-driver/init"
      type: "string"
