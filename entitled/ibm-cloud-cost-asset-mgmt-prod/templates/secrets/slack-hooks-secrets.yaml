# We need to have the isIcp flag enabled only for the PPA delivery for rest all the
# secrets needs to be created. The one to skip in PPA is docker registry entry
{{- template "isIcp" . -}}
{{- if not (.Values.isIcp) }}
# DO NOT modify this conditional check
{{ if not (eq (.Values.enableQASettings|quote|lower) "\"true\"") }}
# slack-hooks (only enabled for QA/PROD)
apiVersion: v1
kind: Secret
metadata:
  name: slack-hooks
  labels:
{{ include "cam.labels" .  | indent 4 }}
type: Opaque
data:
  # DO NOT modify this conditional check
  {{ if eq (.Values.enableQASettings|quote|lower) "\"true\"" }}
  # QA
  slackURL: {{ .Values.secrets.slackHookQA | b64enc | quote }}
  {{ else }}
  # PROD
  slackURL: {{ .Values.secrets.slackHookProd | b64enc | quote }}
  {{ end }}

{{ end }}
{{ end }}
