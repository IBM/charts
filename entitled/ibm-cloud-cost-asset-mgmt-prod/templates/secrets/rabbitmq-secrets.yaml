# We need to have the isIcp flag enabled only for the PPA delivery for rest all the
# secrets needs to be created. The one to skip in PPA is docker registry entry
{{- template "isIcp" . -}}
{{- if not (.Values.isIcp) }}
# RabbitMQ secrets (for ibus)
apiVersion: v1
kind: Secret
metadata:
  name: rabbitmq-creds
  labels:
{{ include "cam.labels" .  | indent 4 }}
type: Opaque
data:
  rabbitmq.username: {{ required "secrets.rabbitmqDefaultUser is required!" .Values.secrets.rabbitmqDefaultUser | b64enc | quote }}
  rabbitmq.password: {{ required "secrets.rabbitmqDefaultPassword is required!" .Values.secrets.rabbitmqDefaultPassword | b64enc | quote }}
{{ end }}
