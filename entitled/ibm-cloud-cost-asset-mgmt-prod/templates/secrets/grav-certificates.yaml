# We need to have the isIcp flag enabled only for the PPA delivery for rest all the
# secrets needs to be created. The one to skip in PPA is docker registry entry
{{- template "isIcp" . -}}
{{- if not (.Values.isIcp) }}
# All other Certificates and key files
apiVersion: v1
kind: Secret
metadata:
  name: grav-certificates
  labels:
{{ include "cam.labels" .  | indent 4 }}
type: Opaque
data:
  cm.keystore: {{ .Files.Get "config/cloudMatrix.keystore" | b64enc }}
  grav.crt: {{ .Files.Get "config/grav.crt" | b64enc }}
  grav.key: {{ .Files.Get "config/grav.key" | b64enc }}
  maria_dev.crt: {{ .Files.Get "config/maria_dev.crt" | b64enc }}
  maria_dev.key: {{ .Files.Get "config/maria_dev.key" | b64enc }}
  rootca.pem: {{ .Files.Get "config/rootCA.pem"| b64enc }}
{{ end }}
