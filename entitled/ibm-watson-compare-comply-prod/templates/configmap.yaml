{{- include "sch.config.init" (list . "sch.chart.config.values") -}}
{{- $compName :=  .sch.chart.components.frontend.name -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-configmap
  labels:
{{ include "sch.metadata.labels.standard" (list . $compName) | indent 4 }}
data:
  application.properties: |-
    ###########################################################
    # Application Configs
    ###########################################################
    spring.application.name=cnc-frontend-service
    spring.profiles.active=prod
    cnc.deployment-public=false
    cnc.disable.ocr=false
    cnc.validate-headers=true
    cnc.logstash.url=logstash.kube-system:5044
    ###########################################################
    # Service Info
    ###########################################################
    cnc.metrics.type=prometheus
    cnc.service-id=c761207a-602e-4fb4-b97c-9baf475410ad
    cnc.plan-id=cef65e10-5e30-4671-88d5-105dede9f34e
    cnc.environment-id=default
    cnc.collection-id=default
    cnc.service.name=cnc-frontend-service
    cnc.component.name=cnc-frontend-service
    cnc.client.name=cnc-frontend-service
    cnc.ip=127.0.0.1
    cnc.tribe.name=cnc-ingestion
    cnc.tip.url=
    cnc.tip.token=
    cnc.api.url.patterns=/api/v1/*
    cnc.api.swagger.paths=/api/v1/.*
    ###########################################################
    # Enable HTTPS
    ###########################################################
    server.port=9443
    server.ssl.key-store=classpath:cnc.functions.p12
    server.ssl.key-store-password=watson-cnc
    server.ssl.key-store-type=PKCS12
    server.ssl.key-alias=cnc.functions
    ###########################################################
    # Upload limits
    ###########################################################
    spring.http.multipart.max-file-size=100MB
    spring.http.multipart.max-request-size=100MB
    ###########################################################
    # Health
    ###########################################################
    endpoints.health.path=/api/health/check
    ###########################################################
    # Security
    ###########################################################
    security.basic.enabled=false
    management.security.enabled=false
    cnc.hidden-headers=X-Real-IP,X-Application-Context,True-Client-IP,X-Forwarded-Port,X-Forwarded-For
    ###########################################################
    # Pager Duty
    ###########################################################
    cnc.service-pagerDuty-apiKey-highUrgency=
    cnc.incident.key.prefix=
    ###########################################################
    # Components
    ###########################################################
    cnc.component.pdf.api.url=
    cnc.component.pdf.healthcheck.url=
    cnc.component.nlp.api.url=
    cnc.component.nlp.healthcheck.url=
    cnc.component.compare.api.url=
    cnc.component.compare.healthcheck.url=
    cnc.component.healthcheck.failuresCountBeforeFail=5
    cnc.max-retries-downstream=5
    cnc.retry-sleep-interval=3000
    cnc.registration.api.url=
    ###########################################################
    # ICP Readiness
    ###########################################################
    cnc.component.maxActiveNumFiles={{ template "maxActiveNumFiles" . }}
    cnc.component.maxInputProcessingSize={{ template "maxInputProcessingSize" . }}
    ###########################################################
    # Segments Integration
    ###########################################################
    cnc.segment.enabled=false
    # The endpoint of the SEGMENT proxy that we need to use to get to segment.io
    cnc.segment.endpoint=DUMMY_ENDPOINT
    # Unique identifier for SEGMENT Source.
    cnc.segment.writeKey=DUMMY_KEY