
{{- include "sch.config.init" (list . "sch.chart.config.values") -}}
{{- $compName :=  .sch.chart.components.frontend.name -}}
{{- $compNameTest :=  .sch.chart.components.test.name -}}
{{- $testCompName :=  printf "%s-%s" $compName "test" -}}
{{- $fullTestCompName := include "sch.names.fullCompName" (list . $testCompName) }}

apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-configmap.test
  labels:
{{ include "sch.metadata.labels.standard" (list . $compNameTest) | indent 4 }}
data:
  test-script.sh: |-
    {{ .Files.Get "tests/test-script.sh" }}
binaryData:
  scanned.signed-sqt.pdf: |-
    {{ .Files.Get "tests/scanned.signed-sqt.pdf" | b64enc }}
