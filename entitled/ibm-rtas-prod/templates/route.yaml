{{- $route := .Values.route -}}
{{- if $route.enabled -}}
{{- $ingress := .Values.ingress -}}
{{- if not (and $ingress.enabled (eq $ingress.type "istio")) -}}
{{- $fullName := include "gateway.fullname" . -}}
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-28
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /auth{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: {{ printf "%s-%s" .Release.Name "ssocloak" | trunc 20 | trimSuffix "-" }}-http
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-32
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /api/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-36
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /datasets/v2/api-docs{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-40
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /jobservice/v2/api-docs{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-44
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /management/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-48
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /rest/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-52
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /results/analytics/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-56
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /results/ftwebreport/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-60
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /results/rest/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-64
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /results/static/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-68
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /results/v2/api-docs{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-72
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /rm/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-76
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /sse/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-80
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /sso/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-84
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /swagger-resources
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-88
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /testassets/v2/api-docs{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-92
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /v2/api-docs{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: gateway
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-96
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /webhook/{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: tam
  tls:
    termination: edge
  wildcardPolicy: None
---
apiVersion: route.openshift.io/v1
kind: Route
metadata:
  name: {{ $fullName }}-100
spec:
  host: {{ .Values.global.ibmRtasIngressDomain }}
  path: /{{ .Values.ingress.trailer }}
  port:
    targetPort: http
  to:
    kind: Service
    name: {{ printf "%s-%s" .Release.Name "frontend" | trunc 63 | trimSuffix "-" }}
  tls:
    termination: edge
  wildcardPolicy: None
---
{{- end }}
{{- end }}
