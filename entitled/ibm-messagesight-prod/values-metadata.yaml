## Metadata for <ibm-messagesight-prod> configuration
## This metadata is used to augment the value.yaml to drive ICP UI for configuration of the Helm chart installation

global:
  __metadata:
    label: "Gobal settings for MessageSight"
    description: "Global configuration settings for MessageSight"
  license:
    __metadata:
      label: "License"
      description: "You must accept the MessageSight license"
      type: "string"
      required: true
      options:
      - label: "Accept"
        value: "accept"
      - label: "Not Accepted"
        value: "not accepted"

  messagesightEnabled:
    __metadata:
      label: "Install MessageSight Server"
      description: "Select this checkbox to install MessageSight Server"
      type: "boolean"
      immutable: false
      required: true
  messagesightuiEnabled:
    __metadata:
      label: "Install MessageSight Web UI"
      description: "Select this checkbox to install MessageSight Web UI"
      type: "boolean"
      immutable: false
      required: true
  virtualIP:
    __metadata:
      name: "virtualIP"
      label: "Proxy host IP used to access MessageSight"
      description: "Array of proxy host external IP addresses that can access MessageSight Server and Web UI ports"
      type: "string"
      required: true

messagesight:
  __metadata:
    label: "MessageSight Server Configuration"
    description: "Configuration settings for the MessageSight Server"
  licensedUsage:
    __metadata:
      label: "Licensed Usage"
      description: "Specify the MessageSight licensed usage setting if you have selected Install for the MessageSight Server"
      type: "string"
      required: true
      options:
      - label: "Production"
        value: "Production"
      - label: "Non-Production"
        value: "Non-Production"

  serviceAccount:
    __metadata:
      name: "serviceAccount"
      label: "Service account"
      description: "Service account that installs the server.  If not specified, the default service account is used."
      type: "string"
      required: false
  image:
    repository:
      __metadata:
        label: "Server image repository"
        description: "Docker registry to pull server image from"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        label: "Image tag"
        description: "A tag is a label applied to a image in a repository. Tags are how various images in a repository are distinguished from each other."
        type: "string"
        immutable: false
        required: true
    # If pullPolicy is not set, IfNotPresent is used by default.
    # Thus the setting is not required.
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        type: "string"
        immutable: false
        required: false
        options:
        - label: "If not present"
          value: "IfNotPresent"
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
  # If no adminPort is provided, 9089 will be set by default. Thus no setting is required.
  adminPort:
    __metadata:
      label: "Admin endpoint port"
      description: "Port value for the REST API"
      type: number
      required: false
  messagingPorts:
    __metadata: 
      label: "Messaging endpoint ports"
      description: "A comma delimited list of port values for MessageSight messaging endpoints"
      type: "string"
      required: true
  resources:
    limits:
      memory:
        __metadata:
          label: "Memory limit"
          description: "The memory upper limit in bytes. Specify integers with suffixes: E, P, T, G, M, K, or power-of-two equivalents: Ei, Pi, Ti, Gi, Mi, Ki."
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "CPU limit"
          description: "The upper limit of CPU core. Specify integers, fractions (e.g. 0.5), or millicore values(e.g. 100m, where 100m is equivalent to .1 core)."
          type: "string"
          required: true
    requests:
      memory:
        __metadata:
          label: "Memory request"
          description: "The minimum memory in bytes. Specify integers with one of these suffixes: E, P, T, G, M, K, or power-of-two equivalents: Ei, Pi, Ti, Gi, Mi, Ki."
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "CPU request"
          description: "The minimum required CPU core. Specify integers, fractions (e.g. 0.5), or millicore values(e.g. 100m, where 100m is equivalent to .1 core)."
          type: "string"
          required: true
  # Access as root user should not be necessary. This option is available should a use case requiring root access arise.
  # This option can only be specified via the helm command line.  Use this option only with guidance from the IBM support team.
  privilegedInstall:
    __metadata:
      label: "Privileged access required"
      description: "Select this checkbox if you use NFS persistent volumes that require root access or if you run as cluster admin in the default namespace"
      type: boolean
      required: false
      hidden: true
  persistence:
    enabled:
      __metadata:
        label: "Enable persistent storage for the MessageSight server"
        description: "(Required for production) Select this checkbox to store server data on a persistent volume so that the data is preserved if the pod is stopped."
        type: boolean
        required: false
    useDynamicProvisioning:
      __metadata:
        label: "Use dynamic storage provisioning"
        description: "Select this checkbox to allow the cluster to automatically provision new storage resource and create PersistentVolume objects."
        type: boolean
        required: false
    fsGroup:
      __metadata:
        label: "File system group"
        description: "Group ID for owner of an NFS persistent volume"
        type: number
        required: false
    supplementalGroups:
      __metadata:
        name: "Supplemental Groups"
        label: "Group IDs for persistent volumes"
        description: "An array of integer values representing the Group IDs required to access persistent volumes"
        type: "string"
        required: false
        hidden: true

  dataPVC:
    existingClaimName: 
      __metadata:
        label: "Existing claim name"
        description: "Set this value if you want to use an existing persistent volume claim for your server data"
        type: "string"
        required: false
    storageClassName:
      __metadata:
        label: "Storage class name"
        description: "Set this value if you want to use only a specific storage class for dynamic provisioning or with your volume selector"
        type: "string"
        required: false
    selector:
      label:
        __metadata:
          name: "label"
          label: "Label to select a volume"
          description: "Label for volume selector if not using dynamic provisioning"
          type: "string"
          immutable: false
          required: false
      value:
        __metadata:
          name: "value"
          label: "Value of the label to select a volume"
          description: "Value for volume selector if not using dynamic provisioning"
          type: "string"
          immutable: false
          required: false
    size:
      __metadata:
        label: "MessageSight server data volume size"
        description: "Specify the size of the data MessageSight server storage volume"
        type: "string"
        required: true
  nodeAffinity:
    required:
      __metadata:
        label: "Node Affinity"
        description: "Check this box if you want to require node affinity using the specified node label."
        type: boolean
        required: false
    key:
      __metadata:
        label: "Node Label Key"
        description: "The node label key used for MessageSight server node affinity. If not specified, the default is messagesight."
        type: string
        required: false
    value:
      __metadata:
        label: "Node Label Value"
        description: "The node label value used for  MessageSight server node affinity. If not specified, the default is server."
        type: string
        required: false
  tolerations:
    __metadata:
      label: "Tolerations"
      description: "Array of tolerations for MessageSight server pod assignments (e. g., {key:key,operator:Equal,value:value,effect:NoSchedule})"
      type: "string"
      required: false
messagesightui:
  __metadata:
    label: "MessageSight Web UI Configuration"
    description: "Configuration settings for the MessageSight Web UI"
  serviceAccount:
    __metadata:
      name: "serviceAccount"
      label: "Service account"
      description: "Service account that installs the Web UI. If not specified, the default service account is used."
      type: "string"
      required: false
  image:
    repository:
      __metadata:
        label: "Web UI image repository"
        description: "Docker registry to pull Web UI image from"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        label: "Image tag"
        description: "A tag is a label applied to a image in a repository. Tags are how various images in a repository are distinguished from each other."
        type: "string"
        immutable: false
        required: true
    # If pullPolicy is not set, IfNotPresent is used by default.
    # Thus the setting is not required.
    pullPolicy:
      __metadata:
        label: "Image pull policy"
        description: "The default pull policy is IfNotPresent which causes the Kubelet to skip pulling an image if it already exists."
        type: "string"
        immutable: false
        required: false
        options:
        - label: "If not present"
          value: "IfNotPresent"
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
  # If no webuiPort is provided, 9087 will be set by default. Thus no setting is required.
  webuiPort:
    __metadata:
      label: "Web UI port"
      description: "Port value for accessing the MessageSight Web UI"
      type: number
      required: false
  resources:
    limits:
      memory:
        __metadata:
          label: "Memory limit"
          description: "The memory upper limit in bytes. Specify integers with suffixes: E, P, T, G, M, K, or power-of-two equivalents: Ei, Pi, Ti, Gi, Mi, Ki."
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "CPU limit"
          description: "The upper limit of CPU core. Specify integers, fractions (e.g. 0.5), or millicore values(e.g. 100m, where 100m is equivalent to .1 core)."
          type: "string"
          required: true
    requests:
      memory:
        __metadata:
          label: "Memory request"
          description: "The minimum memory in bytes. Specify integers with one of these suffixes: E, P, T, G, M, K, or power-of-two equivalents: Ei, Pi, Ti, Gi, Mi, Ki."
          type: "string"
          required: true
      cpu:
        __metadata:
          label: "CPU request"
          description: "The minimum required CPU core. Specify integers, fractions (e.g. 0.5), or millicore values(e.g. 100m, where 100m is equivalent to .1 core)."
          type: "string"
          required: true
  # Access as root user should not be necessary. This option is available should a use case requiring root access arise.
  # This option can only be specified via the helm command line.  Use this option only with guidance from the IBM support team.
  privilegedInstall:
    __metadata:
      label: "Privileged access required"
      description: "Select this checkbox if you use NFS persistent volumes that require root access or if you run as cluster admin in the default namespace"
      type: boolean
      required: false
      hidden: true
  persistence:
    enabled:
      __metadata:
        label: "Enable persistent storage for the MessageSight Web UI"
        description: "Select this checkbox to store Web UI configuration data on a persistent volume so that the data is preserved if the pod is stopped."
        type: boolean
        required: false 
    useDynamicProvisioning:
      __metadata:
        label: "Use dynamic storage provisioning"
        description: "Select this checkbox to allow the cluster to automatically provision new storage resource and create PersistentVolume objects."
        type: boolean
        required: false
    fsGroup:
      __metadata:
        label: "File system group"
        description: "Group ID for owner of an NFS persistent volume"
        type: number
        required: false
    supplementalGroups:
      __metadata:
        name: "Supplemental Groups"
        label: "Group IDs for persistent volumes"
        description: "An array of integer values representing the Group IDs required to access persistent volumes"
        type: "string"
        required: false
        hidden: true
  dataPVC:
    existingClaimName: 
      __metadata:
        label: "Existing claim name"
        description: "Set this value if you want to use an existing persistent volume claim for your Web UI data"
        type: "string"
        required: false
    storageClassName:
      __metadata:
        label: "Storage class name"
        description: "Set this value if you want to use only a specific storage class for dynamic provisioning or with your volume selector"
        type: "string"
        required: false
    selector:
      label:
        __metadata:
          name: "label"
          label: "Label to select a volume"
          description: "Label for volume selector if not using an existing claim name or dynamic provisioning"
          type: "string"
          immutable: false
          required: false
      value:
        __metadata:
          name: "value"
          label: "Value to select a volume"
          description: "Value for volume selector if not using an existing claim name or dynamic provisioning"
          type: "string"
          immutable: false
          required: false
    size:
      __metadata:
        label: "MessageSight Web UI data volume size"
        description: "Specify the size of the data MessageSight Web UI storage volume"
        type: "string"
        required: true
  nodeAffinity:
    required:
      __metadata:
        label: "Node Affinity"
        description: "Check this box to require node affinity using the specified node label."
        type: boolean
        required: false
    key:
      __metadata:
        label: "Node Label Key"
        description: "The node label key used for MessageSight Web UI node affinity. If not specified, the default is messagesight."
        type: string
        required: false
    value:
      __metadata:
        label: "Node Label Value"
        description: "The node label value used for  MessageSight Web UI node affinity. If not specified, the default is webui."
        type: string
        required: false
  tolerations:
    __metadata:
      label: "Tolerations"
      description: "Array of tolerations for MessageSight Web UI pod assignments (e. g., {key:key,operator:Equal,value:value,effect:NoSchedule})"
      type: "string"
      required: false