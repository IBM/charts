global:
  __metadata:
    label: "Global values"
    description: "Shared values across components"
  existingClaimName:
    __metadata:
      name: "existingClaimName"
      label: "PVC name for JDBC drivers"
      description: "Name of an existing PersistentVolumeClaim for JDBC drivers"
      type: "string"
      required: true
  imagePullSecrets:
    __metadata:
      name: "imagePullSecrets"
      label: "Name of the Docker Secret"
      description: "Name of an existing Secret containing Docker credentials"
      type: "string"
      required: true
  isOpenShift:
    __metadata:
      name: "isOpenShift"
      label: "Deploy on OpenShift?"
      description: "This setting controls if the installation process sets a numeric UID as container runAsUser (required for non-OpenShift)."
      type: "boolean"
      required: true
  ums:
    serviceType:
      __metadata:
        name: "serviceType"
        label: "UMS service type"
        description: "Service type for the UMS"
        options:
        - label: 'ClusterIP'
          value: 'ClusterIP'
        - label: 'NodePort'
          value: 'NodePort'
        - label: 'Ingress'
          value: 'Ingress'
    hostname:
      __metadata:
        name: "hostname"
        label: "UMS hostname"
        description: "External hostname for the UMS"
        type: "string"
        required: true
    port:
      __metadata:
        name: "port"
        label: "UMS port"
        description: "External port for the UMS"
        type: "number"
        required: true
    adminSecretName:
      __metadata:
        name: "adminSecretName"
        label: "UMS admin Secret name"
        description: "Name of an existing Secret with administrative credentials"
        type: "string"
        required: true
    dbSecretName:
      __metadata:
        name: "dbSecretName"
        label: "UMS database connection Secret name"
        description: "Name of an existing Secret with database connection credentials"
        type: "string"
        required: true
    ltpaSecretName:
      __metadata:
        name: "ltpaSecretName"
        label: "UMS LTPA Secret name"
        description: "Name of an existing Secret that will be filled from the LTPA creation job"
        type: "string"
        required: true



images:
  __metadata:
    label: "Docker images"
    description: "UMS Docker images"
  ums:
    __metadata:
      name: "ums"
      label: "UMS image name"
      description: "Main UMS Docker image name"
      type: "string"
      required: true
  initTLS:
    __metadata:
      name: "ums"
      label: "TLS init image name"
      description: "TLS certificate initialization Docker image name"
      type: "string"
      required: true
  ltpa:
    __metadata:
      name: "ums"
      label: "LTPA creation image name"
      description: "LTPA keys creation Docker image name"
      type: "string"
      required: true
  pullPolicy:
    __metadata:
      name: "pullPolicy"
      label: "Pull Policy"
      description: "Docker Image Pull Policy"
      type: "string"
      required: true
      options:
        - label: "Always"
          value: "Always"
        - label: "IfNotPresent"
          value: "IfnotPresent"
        - label: "Never"
          value: "Never"

ingressSecretName:
  __metadata:
    name: "ingressSecretName"
    label: "Name of the Ingress Secret"
    description: "Name of an existing Secret containing a certificate for the Ingress resource"
    type: "string"
    required: false

tls:
  __metadata:
    label: "TLS configuration"
    description: "UMS TLS configuration"
  tlsSecretName:
    __metadata:
      name: "tlsSecretName"
      label: "UMS TLS secret name"
      description: "Name of an existing secret with tls.key and tls.crt"
      type: "string"
      required: true

useCustomJDBCDrivers:
  __metadata:
    name: "useCustomJDBCDrivers"
    label: "Use Custom JDBC Drivers"
    description: "Toggle for using custom JDBC drivers (instead of the embedded Derby/DB2 drivers)"
    type: "boolean"
    required: true

oauth:
  __metadata:
      label: "UMS config for OAuth"
      description: "Configuration for UMS OAuth setup"
  database:
    type:
      __metadata:
        name: "type"
        label: "Database type"
        description: "UMS OAuth database type"
        type: "string"
        required: true
        options:
          - label: "derby"
            value: "derby"
          - label: "db2"
            value: "db2"
          - label: "mssql"
            value: "mssql"
          - label: "oracle"
            value: "oracle"
    name:
      __metadata:
        name: "name"
        label: "OAuth Database name"
        description: "UMS OAuth database name"
        type: "string"
        required: true
    host:
      __metadata:
        name: "host"
        label: "OAuth Database host"
        description: "UMS OAuth database host name"
        type: "string"
        required: true
    port:
      __metadata:
        name: "port"
        label: "OAuth Database port"
        description: "UMS OAuth database port"
        type: "string"
        required: true
    ssl:
      __metadata:
        name: "ssl"
        label: "OAuth Database SSL enablement"
        description: "UMS OAuth database SSL enablement (true or false)"
        type: "boolean"
        required: true
    sslSecretName:
      __metadata:
        name: "sslSecretName"
        label: "OAuth Database SSL CA Certificate Secret"
        description: "Secret that contains the CA Certificate of the UMS OAuth database"
        type: "string"
        required: false
    driverfiles:
      __metadata:
        name: "driverfiles"
        label: "OAuth Database driver files"
        description: "UMS OAuth database JDBC driver files"
        type: "string"
        required: true
    alternateHosts:
      __metadata:
        name: "alternateHosts"
        label: "Db2 HADR client reroute alternate server names"
        description: "Comma-separate list of Db2 HADR failover servers"
        type: "string"
        required: false
    alternatePorts:
      __metadata:
        name: "alternatePorts"
        label: "Db2 HADR client reroute alternate port numbers"
        description: "Comma-separate list of Db2 HADR failover port numbers (sequence matching alternateHosts)"
        type: "string"
        required: false
  clientManagerGroup:
    __metadata:
      name: "clientManagerGroup"
      label: "OAuth client manager group"
      description: "UMS OAuth client manager group"
      type: "string"
      required: false
  jwtSecretName:
    __metadata:
      name: "jwtSecretName"
      label: "UMS JWT Secret Name"
      description: "Name of an existing secret with tls.key and tls.crt"
      type: "string"
      required: true

teamserver:
  __metadata:
      label: "UMS config for Team Server"
      description: "Configuration for UMS Team Server setup"
  database:
    type:
      __metadata:
        name: "type"
        label: "Database type"
        description: "UMS Team Server database type"
        type: "string"
        required: true
        options:
          - label: "derby"
            value: "derby"
          - label: "db2"
            value: "db2"
          - label: "mssql"
            value: "mssql"
          - label: "oracle"
            value: "oracle"
    name:
      __metadata:
        name: "name"
        label: "Team Server Database name"
        description: "UMS Team Server database name"
        type: "string"
        required: true
    host:
      __metadata:
        name: "host"
        label: "Team Server Database host"
        description: "UMS Team Server database host name"
        type: "string"
        required: true
    port:
      __metadata:
        name: "port"
        label: "Team Server Database port"
        description: "UMS Team Server database port"
        type: "string"
        required: true
    ssl:
      __metadata:
        name: "ssl"
        label: "Team Server Database SSL enablement"
        description: "UMS Team Server database SSL enablement (true or false)"
        type: "boolean"
        required: true
    sslSecretName:
      __metadata:
        name: "sslSecretName"
        label: "Team Server Database SSL CA Certificate Secret"
        description: "Secret that contains the CA Certificate of the UMS OAuth database"
        type: "string"
        required: false
    driverfiles:
      __metadata:
        name: "driverfiles"
        label: "Team Server Database driver files"
        description: "UMS Team Server database JDBC driver files"
        type: "string"
        required: true
    alternateHosts:
      __metadata:
        name: "alternateHosts"
        label: "Db2 HADR client reroute alternate server names"
        description: "Comma-separate list of Db2 HADR failover servers"
        type: "string"
        required: false
    alternatePorts:
      __metadata:
        name: "alternatePorts"
        label: "Db2 HADR client reroute alternate port numbers"
        description: "Comma-separate list of Db2 HADR failover port numbers (sequence matching alternateHosts)"
        type: "string"
        required: false

logs:
  __metadata:
      label: "UMS logs config"
      description: "Configuration for UMS logging"
  consoleFormat:
    __metadata:
      name: "consoleFormat"
      label: "Console format"
      description: "UMS Liberty log console format"
      type: "string"
      required: false
      options:
        - label: "json"
          value: "json"
        - label: "basic"
          value: "basic"
  consoleLogLevel:
    __metadata:
      name: "consoleLogLevel"
      label: "Console log level"
      description: "UMS Liberty log level"
      type: "string"
      required: false
      options:
        - label: "INFO"
          value: "INFO"
        - label: "AUDIT"
          value: "AUDIT"
        - label: "WARNING"
          value: "WARNING"
        - label: "ERROR"
          value: "ERROR"
        - label: "OFF"
          value: "OFF"
  consoleSource:
    __metadata:
      name: "consoleSource"
      label: "Console source"
      description: "UMS Liberty console source"
      type: "string"
      required: false
  traceFormat:
    __metadata:
      name: "traceFormat"
      label: "Trace format"
      description: "UMS Liberty trace format"
      type: "string"
      required: false
      options:
        - label: "BASIC"
          value: "BASIC"
        - label: "ENHANCED"
          value: "ENHANCED"
        - label: "ADVANCED"
          value: "ADVANCED"
  traceSpecification:
    __metadata:
      name: "traceSpecification"
      label: "Trace specification"
      description: "UMS Liberty trace specification"
      type: "string"
      required: false
      options:
        - label: "*=info"
          value: "*=info"

replicaCount:
  __metadata:
    name: "replicaCount"
    label: "Static number of replicas"
    description: "UMS static replica number - not used when autoscaling is enabled"
    type: "number"
    required: true

autoscaling:
  __metadata:
    label: "Automatically scale pods"
    description: "User Management Service autoscale settings - overrides the replicaCount field"
  enabled:
    __metadata:
      name: "enabled"
      label: "Automatic scaling"
      description: "User Management Service horizontal pod autoscaler (HPA)"
      type: "boolean"
      required: false
  targetAverageUtilization:
    __metadata:
      name: "targetAverageUtilization"
      label: "Target average CPU utilization percentage"
      description: "User Management Service target average CPU utilization over all the pods"
      type: "number"
      required: false
  minReplicas:
    __metadata:
      name: "minReplicas"
      label: "Minimum number of replicas"
      description: "User Management Service lower limit for the number of pods"
      type: "number"
      required: false
  maxReplicas:
    __metadata:
      name: "maxReplicas"
      label: "Maximum number of replicas"
      description: "User Management Service upper limit for the number of pods"
      type: "number"
      required: false

resources:
  __metadata:
    label: "Resources"
    description: "User Management Service resource settings"
  limits:
    cpu:
      __metadata:
        name: "limits.cpu"
        label: "Maximum CPU"
        description: "User Management Service maximum amount of CPU allowed"
        type: "string"
        required: false
    memory:
      __metadata:
        name: "limits.memory"
        label: "Maximum memory"
        description: "User Management Service maximum amount of memory allowed"
        type: "string"
        required: false
  requests:
    cpu:
      __metadata:
        name: "requests.cpu"
        label: "Minimum CPU"
        description: "User Management Service minimum amount of CPU required"
        type: "string"
        required: false
    memory:
      __metadata:
        name: "requests.memory"
        label: "Minimum memory"
        description: "User Management Service minimum amount of memory required"
        type: "string"
        required: false

customXml:
  __metadata:
    name: "customXml"
    label: "Custom User Management Service complex config settings"
    description: "Multiline string containing a Liberty server.xml artifact with complex config settings"
    type: "string"
    multiline: true
    required: false

customSecretName:
  __metadata:
    name: "customSecretName"
    label: "custom Secret name"
    description: "Name of an existing Secret for sensitive Liberty configuration in XML format"
    type: "string"
    required: false

useCustomBinaries:
  __metadata:
    name: "useCustomBinaries"
    label: "Use Custom Binaries"
    description: "Toggle for using custom binaries"
    type: "boolean"
    required: true
