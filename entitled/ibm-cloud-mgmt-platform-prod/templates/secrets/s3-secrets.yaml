# We need to have the isIcp flag enabled only for the PPA delivery for rest all the
# secrets needs to be created. The one to skip in PPA is docker registry entry
{{- template "isIcp" . -}}
{{- if not (.Values.isIcp) }}

# S3 ObjectStore secrets (for backups)
apiVersion: v1
kind: Secret
metadata:
  name: s3
  labels:
{{ include "core.labels" .  | indent 4 }}
type: Opaque
data:
  s3.url: "{{ .Values.secretsS3Url }}"
  s3.access_key_id: "{{ .Values.secretsS3AccessKeyId }}"
  s3.secret_access_key: "{{ .Values.secretsS3SecretAccessKey }}"
  encryption_passphrase: "{{ .Values.secretsBackupPassphrase }}"
{{ end }}
