## Metadata for Netcool/OMNIbus Syslogd Probe configuration
## This metadata is used to augment the value.yaml to drive IPC UI for configuration of the Helm chart installation
     
## Replica count configuration metadata
replicaCount: 
  __metadata:
    name: "replicaCount"
    label: "Replica Count"
    description: "Deployment replicaCount - optional field dependent on workload"
    type: "number"
    immutable: false
    required: false

arch: 
  __metadata:
    name: "Architecture"
    label: "Worker node architecture"
    description: "Worker node architecture to deploy to. Only supports amd64."
    type: "string"
    immutable: true
    required: true
    options:
      - label: "amd64"
        value: "amd64"         

## License acceptance
license:
  __metadata:
    name: "license"
    label: "Docker image license acceptance"
    description: "Must be set to \"accept\" to proceed with installation. Defaults to Not Accepted."
    type: "string"
    immutable: false
    required: true
    hidden: false
    options:
    - label: "Not Accepted"
      value: "not accepted"
    - label: "Accept"
      value: "accept"

## Image configuration metadata
image:
  __metadata:
      label: "Docker Image"
      name: "image"
      description: "Docker Image Configuration"
  repository:
    __metadata:
      name: "repository"
      label: "Docker Image Repository"
      description: "Docker image repository. The image name should be set to \"netcool-probe-syslogd\"."
      type: "string"
      immutable: false
      required: true
  tag:
    __metadata:
      name: "tag"
      label: "Docker image Tag"
      description: "Specific image tag to use."
      type: "string"
      immutable: false
      required: true
  testRepository:
    __metadata:
      name: "testRepository"
      label: "Test Image Repository"
      description: "Docker image repository for the test image."
      type: "string"
      immutable: false
      required: true
  testImageTag:
    __metadata:
      name: "testImageTag"
      label: "Docker test image tag"
      description: "Specific image tag to use for the test image"
      type: "string"
      immutable: false
      required: true
  pullPolicy:
    __metadata:
      name: "pullPolicy"
      label: "Docker Image Pull Policy"
      description: "Always, Never, or IfNotPresent. Defaults to IfNotPresent"
      type: "string"
      immutable: false
      required: true
      options:
      - label: "Always"
        value: "Always"
      - label: "Never"
        value: "Never"
      - label: "If Not Present"
        value: "IfNotPresent"


global:
  __metadata:
    label: "Global"
    description: "Global scope"
  image: 
    secretName:
      __metadata:
        name: "Image Pull Secret Name"
        label: "Global Image Pull Secret Name"
        description: "The global image pull secret to authenticate with the image repository."
        type: "string"
        immutable: false
        required: false

## Netcool Object Server configuration
netcool:
  __metadata:
    label: "Object Server"
    description: "Object Server Configuration"
  primaryServer:
    __metadata:
      name: "primaryServer"
      label: "Primary Object Server Name"
      description: "The Primary Netcool/OMNIbus Object Server Name (usually set to NCOMS or AGG_P)."
      type: "string"
      immutable: false
      required: true
  primaryHost:
    __metadata:
      name: "primaryHost"
      label: "Primary Object Server Host"
      description: "The Primary Netcool/OMNIbus Object Server Hostname or IP address."
      type: "string"
      immutable: false
      required: true
  primaryPort:
    __metadata:
      name: "primaryPort"
      label: "Primary Object Server Port"
      description: "The Primary Netcool/OMNIbus Object Server Port number."
      type: "number"
      immutable: false
      required: true
  backupServer:
    __metadata:
      name: "backupServer"
      label: "Backup Object Server Name"
      description: >
        The Backup Netcool/OMNIbus Object Server Name. If the backupServer, backupHost 
        and backupPort parameters are defined in addition
        to the primaryServer, primaryHost, and primaryPort parameters, the probe
        will be configured to connect to a virtual object server pair called AGG_V.
      type: "string"
      type: "string"
      immutable: false
      required: false
  backupHost:
    __metadata:
      name: "backupHost"
      label: "Backup Object Server Host"
      description: "The Backup Netcool/OMNIbus Object Server Hostname or IP address."
      type: "string"
      immutable: false
      required: false
  backupPort:
    __metadata:
      name: "backupPort"
      label: "Backup Object Server Port"
      description: "The Backup Netcool/OMNIbus Object Server Port number."
      type: "number"
      immutable: false
      required: false


## Probe configuration
probe:
  __metadata:
    label: "Probe Configuration"
    description: "Probe configuration parameters."
  messageLevel:
    __metadata:
      name: "messageLevel"
      label: "Probe Log Message Level"
      description: "The Probe log message level."
      type: "string"
      immutable: false
      required: false
      options:
      - label: "Fatal"
        value: "fatal"
      - label: "Error"
        value: "error"
      - label: "Warning"
        value: "warn"
      - label: "Info"
        value: "info"
      - label: "Debug"
        value: "debug"
  rulesFile:
    __metadata:
      name: "rulesFile"
      label: "Probe Rules File"
      description: "Specifies the rules files to use. Defaults to Standard"
      type: "string"
      immutable: false
      required: false
      options:
      - label: "Standard"
        value: "standard"
      - label: "Netcool Knowledge Library (NcKL)"
        value: "NCKL"
  readRulesFileTimeout:
    __metadata:
      name: "readRulesFileTimeout"
      label: "Read Rules File Timeout"
      description: "To specify the period (minutes) to checks whether rules file has been modified. If modified, probe re-reads the file."
      type: "number"
      immutable: false
      required: true
  whiteSpaces:
    __metadata:
      name: "whiteSpaces"
      label: "White Spaces"
      description: "Take note of the white space before the tab character ` \\t` ! To specify the characters that the probe treats as whitespace"
      type: "string"
      immutable: false
      required: true
  breakCharacters:
    __metadata:
      name: "breakCharacters"
      label: "Break Characters"
      description: "To list characters that are used in the FIFO to separate non-quoted tokens"
      type: "string"
      immutable: false
      required: true
  offsetOne:
    __metadata:
      name: "offsetOne"
      label: "Offset One"
      description: "To specify the number of token elements to create."
      type: "number"
      immutable: false
      required: true
  offsetTwo:
    __metadata:
      name: "offsetTwo"
      label: "Offset Two"
      description: "To specify the position (count of tokens) within the syslogd message"
      type: "number"
      immutable: false
      required: true
  offsetZero:
    __metadata:
      name: "offsetZero"
      label: "Offset Zero"
      description: "To specify the character position from where the probe should parse the event data."
      type: "number"
      immutable: false
      required: true
  quoteCharacters:
    __metadata:
      name: "quoteCharacters"
      label: "Quote Characters"
      description: "To specify the characters that the probe treats as quote marks"
      type: "string"
      immutable: false
      required: true
  timeFormat:
    __metadata:
      name: "timeFormat"
      label: "Time Format"
      description: "To specify the timestamp conversion format"
      type: "string"
      immutable: false
      required: true

## Service configuration metadata
service:
  __metadata:
    label: "Service"
    description: "Kubernetes services"
  probe:
    type: 
      __metadata:
        name: "Type"
        label: "Service Type"
        description: "This is the Service Type"
        type: "string"
        immutable: false
        required: true
        options:
          - label: "Cluster IP"
            value: "ClusterIP"
          - label: "Node Port"
            value: "NodePort"
    externalPort: 
      __metadata:
        name: "externalPort"
        label: "External port"
        description: "This is the external port number"
        type: "number"
        immutable: false
        required: true

autoscaling:
  __metadata:
    label: "Horizontal Pod Auto-scaling Policy"
    description: "Probe Horizontal Pod Auto-scaling Policy"
  enabled:
    __metadata:
      label: "Enable Horizontal Pod autoscaling"
      description: "Pod will scale based on the autoscaling parameters"
      type: "boolean"
      required: false
  minReplicas:
    __metadata:
      label: "Minimum replicas"
      description: "Minimum number of probe replicas at any point in time"
      type: "number"
      required: false
  maxReplicas:
    __metadata:
      label: "Maximum replicas"
      description: "Maximum number of probe replicas at any point in time"
      type: "number"
      required: false
  cpuUtil:
    __metadata:
      label: "Target CPU utilization"
      description: "Target average CPU utilization (represented as a percentage of requested CPU) over all the pods. Eg: Set to 60 for 60% target utilization."
      type: "number"
      required: false

poddisruptionbudget:
  __metadata:
    label: "Pod Disruption Budget"
    description: "Pod Disruption Budget. Administrator role or higher is required to enable PDB."
  enabled:
    __metadata:
      label: "Enable Pod Disruption Budget"
      description: "Enables application protection availability during a cluster node maintenance"
      type: "boolean"
      required: false
  minAvailable:
    __metadata:
      label: "Minimum number of replicas"
      description: "Minimum number or percentage of probe replicas that must be available during pod eviction"
      type: "string"
      required: false

## Resource requests and limits configuration metadata
resources:
  __metadata:
    label: "Resources"
    description: "Required resources"
  requests:
    cpu: 
      __metadata: 
        label: "CPU request"
        description: "The requested CPU"
        type: "string"
        required: true   
    memory: 
      __metadata: 
        label: "Memory request"
        description: "The memory request"
        type: "string"
        required: true   
  limits:
    cpu: 
      __metadata: 
        label: "CPU limit"
        description: "The CPU limit"
        type: "string"
        required: true   
    memory: 
      __metadata: 
        label: "Memory limit"
        description: "The memory limit"
        type: "string"
        required: true   

